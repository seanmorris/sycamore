!function(){"use strict";var e="undefined"==typeof global?self:global;if("function"!=typeof e.require){var t={},n={},r={},o={}.hasOwnProperty,i=/^\.\.?(\/|$)/,a=function(e,t){for(var n,r=[],o=(i.test(t)?e+"/"+t:t).split("/"),a=0,u=o.length;a<u;a++)".."===(n=o[a])?r.pop():"."!==n&&""!==n&&r.push(n);return r.join("/")},u=function(e){return e.split("/").slice(0,-1).join("/")},s=function(t,r){var o,i={id:t,exports:{},hot:p&&p.createHot(t)};return n[t]=i,r(i.exports,(o=t,function(t){var n=a(u(o),t);return e.require(n,o)}),i),i.exports},c=function(e){var t=r[e];return t&&e!==t?c(t):e},l=function(e,r){null==r&&(r="/");var i=c(e);if(o.call(n,i))return n[i].exports;if(o.call(t,i))return s(i,t[i]);throw new Error("Cannot find module '"+e+"' from '"+r+"'")};l.alias=function(e,t){r[t]=e};var f=/\.[^.\/]+$/,v=/\/index(\.[^\/]+)?$/;l.register=l.define=function(e,i){if(e&&"object"==typeof e)for(var a in e)o.call(e,a)&&l.register(a,e[a]);else t[e]=i,delete n[e],function(e){if(f.test(e)){var t=e.replace(f,"");o.call(r,t)&&r[t].replace(f,"")!==t+"/index"||(r[t]=e)}if(v.test(e)){var n=e.replace(v,"");o.call(r,n)||(r[n]=e)}}(e)},l.list=function(){var e=[];for(var n in t)o.call(t,n)&&e.push(n);return e};var p=e._hmr&&new e._hmr(function(e,t){return c(a(u(e),t))},l,t,n);l._cache=n,l.hmr=p&&p.wrap,l.brunch=!0,e.require=l}}(),function(){"undefined"==typeof window||window;var e=function(e,t,n){var r={},o=function(t,n){try{return e(n+"/node_modules/"+t)}catch(e){if(-1===e.toString().indexOf("Cannot find module"))throw e;if(-1!==n.indexOf("node_modules")){var i=n.split("/"),a=i.lastIndexOf("node_modules"),u=i.slice(0,a).join("/");return o(t,u)}}return r};return function(i){if(i in t&&(i=t[i]),i){if("."!==i[0]&&n){var a=o(i,n);if(a!==r)return a}return e(i)}}};require.register("curvature/base/Bag.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Bag=void 0;var e=n("./Bindable"),r=n("./Mixin"),o=n("../mixin/EventTargetMixin");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,n)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(i,t);var n,r,o=s(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this)).meta=Symbol("meta"),t.content=new Map,t.list=e.Bindable.makeBindable([]),t.current=0,t.type=void 0,t.length=0,t.changeCallback=n,t}return n=i,(r=[{key:"has",value:function(e){return this.content.has(e)}},{key:"add",value:function(e){if(void 0===e||!(e instanceof Object))throw new Error("Only objects may be added to Bags.");if(this.type&&!(e instanceof this.type))throw console.error(this.type,e),new Error("Only objects of type ".concat(this.type," may be added to this Bag."));if(!this.content.has(e)){var t=new CustomEvent("adding",{detail:{item:e}});if(this.dispatchEvent(t)){var n,r=(n=this.current++,Number(n));this.content.set(e,r),this.list[r]=e,this.changeCallback&&this.changeCallback(e,this.meta,i.ITEM_ADDED,r);var o=new CustomEvent("added",{detail:{item:e,id:r}});this.dispatchEvent(o),this.length=this.size}}}},{key:"remove",value:function(e){if(void 0===e||!(e instanceof Object))throw new Error("Only objects may be removed from Bags.");if(this.type&&!(e instanceof this.type))throw console.error(this.type,e),new Error("Only objects of type ".concat(this.type," may be removed from this Bag."));if(!this.content.has(e))return this.changeCallback&&this.changeCallback(e,this.meta,0,void 0),!1;var t=new CustomEvent("removing",{detail:{item:e}});if(this.dispatchEvent(t)){var n=this.content.get(e);delete this.list[n],this.content.delete(e),this.changeCallback&&this.changeCallback(e,this.meta,i.ITEM_REMOVED,n);var r=new CustomEvent("removed",{detail:{item:e,id:n}});return this.dispatchEvent(r),this.length=this.size,e}}},{key:"items",value:function(){return Array.from(this.content.entries()).map(function(e){return e[0]})}},{key:"size",get:function(){return this.content.size}}])&&a(n.prototype,r),i}(r.Mixin.with(o.EventTargetMixin));t.Bag=l,Object.defineProperty(l,"ITEM_ADDED",{configurable:!1,enumerable:!1,writable:!0,value:1}),Object.defineProperty(l,"ITEM_REMOVED",{configurable:!1,enumerable:!1,writable:!0,value:-1})}()}),require.register("curvature/base/Bindable.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(t,n,r){return(e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(o,n.prototype),o}).apply(null,arguments)}function n(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||r(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.Bindable=void 0;var s=Symbol("ref"),c=Symbol("original"),l=Symbol("deck"),f=Symbol("binding"),v=Symbol("subBinding"),p=Symbol("bindingAll"),d=Symbol("isBindable"),y=Symbol("wrapping"),h=Symbol("Names"),b=Symbol("executing"),m=Symbol("stack"),g=(Symbol("object"),Symbol("wrapped")),w=Symbol("unwrapped"),O=Symbol("getProto"),_=Symbol("onGet"),j=Symbol("onAllGet"),k=Symbol("bindChain"),S=Symbol("Descriptors"),P=Object.getPrototypeOf(Int8Array),A=globalThis,R=[A.Node,A.File,A.Map,A.Set,A.WeakMap,A.WeakSet,A.ArrayBuffer,A.ResizeObserver,A.MutationObserver,A.PerformanceObserver,A.IntersectionObserver].filter(function(e){return"function"==typeof e}),T=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var o,u;return o=t,u=[{key:"isBindable",value:function(e){return!(!e||!e[d])&&e[d]===t}},{key:"onDeck",value:function(e,t){return e[l][t]||!1}},{key:"ref",value:function(e){return e[s]||e||!1}},{key:"makeBindable",value:function(e){return this.make(e)}},{key:"shuck",value:function(e,n){n=n||new Map;var r={};if(e instanceof P||e instanceof ArrayBuffer){var o=e.slice(0);return n.set(e,o),o}var a=Object.keys(e);for(var u in a){var s=a[u];if("___"!==s.substring(0,3)){var l=n.get(e[s]);if(l)r[s]=l;else if(e[s]!==e){if(e[s]&&"object"===i(e[s])){var f=e[s];t.isBindable(e[s])&&(f=e[s][c]),r[s]=this.shuck(f,n)}else r[s]=e[s];n.set(e[s],r[s])}else n.set(e[s],r),r[s]=r}}return t.isBindable(e)&&(delete r.bindTo,delete r.isBound),r}},{key:"make",value:function(o){var a=this;if(!o||!["function","object"].includes(i(o)))return o;if(R.filter(function(e){return o instanceof e}).length||Object.isSealed(o)||!Object.isExtensible(o))return o;if(o[s])return o[s];if(o[f])return o;Object.defineProperty(o,s,{configurable:!0,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(o,c,{configurable:!1,enumerable:!1,writable:!1,value:o}),Object.defineProperty(o,l,{configurable:!1,enumerable:!1,writable:!1,value:{}}),Object.defineProperty(o,f,{configurable:!1,enumerable:!1,writable:!1,value:{}}),Object.defineProperty(o,v,{configurable:!1,enumerable:!1,writable:!1,value:new Map}),Object.defineProperty(o,p,{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(o,d,{configurable:!1,enumerable:!1,writable:!1,value:t}),Object.defineProperty(o,b,{enumerable:!1,writable:!0}),Object.defineProperty(o,y,{enumerable:!1,writable:!0}),Object.defineProperty(o,m,{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(o,"___before___",{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(o,"___after___",{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(o,g,{configurable:!1,enumerable:!1,writable:!1,value:{}}),Object.defineProperty(o,w,{configurable:!1,enumerable:!1,writable:!1,value:{}}),Object.defineProperty(o,S,{configurable:!1,enumerable:!1,writable:!1,value:new Map}),Object.defineProperty(o,"bindTo",{configurable:!1,enumerable:!1,writable:!1,value:function e(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=!1;if(Array.isArray(n)){var c=n.map(function(t){return e(t,r,u)});return function(){return c.map(function(e){return e()})}}if(n instanceof Function&&(u=r||{},r=n,s=!0),u.delay>=0&&(r=a.wrapDelayCallback(r,u.delay)),u.throttle>=0&&(r=a.wrapThrottleCallback(r,u.throttle)),u.wait>=0&&(r=a.wrapWaitCallback(r,u.wait)),u.frame&&(r=a.wrapFrameCallback(r,u.frame)),u.idle&&(r=a.wrapIdleCallback(r)),s){var l=o[p].length;if(o[p].push(r),!("now"in u)||u.now)for(var d in o)r(o[d],d,o,!1);return function(){delete o[p][l]}}if(o[f][n]||(o[f][n]=new Set),u.children){var y=r;r=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var a=n[0],s=o[v].get(y);if(s&&(o[v].delete(y),s()),"object"===i(a)){var c=t.make(a);t.isBindable(c)&&o[v].set(y,c.bindTo(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return y.apply(void 0,n.concat(t))},Object.assign({},u,{children:!1}))),y.apply(void 0,n)}else y.apply(void 0,n)}}o[f][n].add(r),"now"in u&&!u.now||r(o[n],n,o,!1);var h=function(){var e=o[v].get(r);e&&(o[v].delete(r),e()),o[f][n]&&o[f][n].has(r)&&o[f][n].delete(r)};return u.removeWith&&u.removeWith instanceof View&&u.removeWith.onRemove(function(){return h}),h}}),Object.defineProperty(o,k,{configurable:!1,enumerable:!1,writable:!1,value:function(e,t){var n=e.split("."),r=n.shift(),i=n.slice(0),u=[];return u.push(o.bindTo(r,function(e,n,r,o){var s=i.join(".");0!==i.length?(void 0===e&&(e=r[n]=a.makeBindable({})),u=u.concat(e[k](s,t))):t(e,n,r,o)})),function(){return u.map(function(e){return e()})}}}),Object.defineProperty(o,"___before",{configurable:!1,enumerable:!1,writable:!1,value:function(e){var t=o.___before___.length;o.___before___.push(e);var n=!1;return function(){n||(n=!0,delete o.___before___[t])}}}),Object.defineProperty(o,"___after",{configurable:!1,enumerable:!1,writable:!1,value:function(e){var t=o.___after___.length;o.___after___.push(e);var n=!1;return function(){n||(n=!0,delete o.___after___[t])}}}),Object.defineProperty(o,"isBound",{configurable:!1,enumerable:!1,writable:!1,value:function(){for(var e in o[p])if(o[p][e])return!0;for(var t in o[f])for(var n in o[f][t])if(o[f][t][n])return!0;return!1}});var u=function(e){o[e]&&o[e]instanceof Object&&!o[e]instanceof Promise&&(R.filter(function(t){return o[e]instanceof t}).length||!Object.isExtensible(o[e])||Object.isSealed(o[e])||(o[e]=t.make(o[e])))};for(var A in o)u(A);var T=o[S],E=o[g],M=o[m];return Object.defineProperty(o,s,{configurable:!1,enumerable:!1,writable:!1,value:new Proxy(o,{get:function(n,r){if(r===s||r===c||"apply"===r||"isBound"===r||"bindTo"===r||"__proto__"===r||"constructor"===r)return o[r];if(r in E)return E[r];var i;if(T.has(r)?i=T.get(r):(i=Object.getOwnPropertyDescriptor(o,r),T.set(r,i)),i&&!i.configurable&&!i.writable)return o[r];if(j in o)return o[j](r);if(_ in o&&!(r in o))return o[_](r);if(i&&!i.configurable&&!i.writable)return E[r]=o[r],E[r];if("function"==typeof o[r]){if(h in o[r])return o[r];Object.defineProperty(o[w],r,{configurable:!1,enumerable:!1,writable:!1,value:o[r]});var a=function(){var t,n=Set.prototype[Symbol.iterator],i=Map.prototype[Symbol.iterator],a="function"==typeof Promise&&o instanceof Promise||"function"==typeof Map&&o instanceof Map||"function"==typeof Set&&o instanceof Set||"function"==typeof i&&o.prototype===i||"function"==typeof n&&o.prototype===n||"function"==typeof n&&o.prototype===n||"function"==typeof WeakMap&&o instanceof WeakMap||"function"==typeof WeakSet&&o instanceof WeakSet||"function"==typeof Date&&o instanceof Date||"function"==typeof P&&o instanceof P||"function"==typeof ArrayBuffer&&o instanceof ArrayBuffer||"function"==typeof EventTarget&&o instanceof EventTarget||"function"==typeof ResizeObserver&&o instanceof ResizeObserver||"function"==typeof MutationObserver&&o instanceof MutationObserver||"function"==typeof PerformanceObserver&&o instanceof PerformanceObserver||"function"==typeof IntersectionObserver&&o instanceof IntersectionObserver||"function"==typeof o[Symbol.iterator]&&"next"===r?o:o[s];o[b]=r,M.unshift(r);for(var u=arguments.length,c=new Array(u),l=0;l<u;l++)c[l]=arguments[l];for(var f in o.___before___)o.___before___[f](o,r,M,o,c);if(new.target)t=e(o[w][r],c);else{var v=Object.getPrototypeOf(o)[r]===o[r],p=o[w][r];t=v?p.apply(a||o,c):p.apply(void 0,c)}for(var d in o.___after___)o.___after___[d](o,r,M,o,c);return o[b]=null,M.shift(),t};return(a[h]=a[h]||new WeakMap).set(o,r),a[j]=function(e){var t=a[h].get(o);return o[t][e]},E[r]=t.make(a),E[r]}return o[r]},set:function(e,n,i){if(n===c)return!0;if(void 0!==o[l][n]&&o[l][n]===i)return!0;if("string"==typeof n&&"___"===n.substring(0,3)&&"___"===n.slice(-3))return!0;if(e[n]===i)return!0;for(var a in i&&i instanceof Object&&(R.filter(function(e){return o instanceof e}).length||!Object.isExtensible(o)||Object.isSealed(o)||(i=t.makeBindable(i))),o[l][n]=i,o[p])o[p][a]&&o[p][a](i,n,e,!1);var u=!1;if(n in o[f]){var s,v=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=r(e))){n&&(e=n);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,a=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw a}}}}(o[f][n]);try{for(v.s();!(s=v.n()).done;)!1===(0,s.value)(i,n,e,!1,e[n])&&(u=!0)}catch(e){v.e(e)}finally{v.f()}}if(delete o[l][n],!u){var d=Object.getOwnPropertyDescriptor(e,n);e instanceof File&&"lastModifiedDate"==n||d&&!d.writable||e[n]!==i||(e[n]=i)}var y=Reflect.set(e,n,i);if(Array.isArray(e)&&o[f].length)for(var h in o[f].length)(0,o[f].length[h])(e.length,"length",e,!1,e.length);return y},construct:function(r,i){var a="constructor";for(var u in r.___before___)r.___before___[u](r,a,o[m],void 0,i);var s=t.make(e(r[c],n(i)));for(var l in r.___after___)r.___after___[l](r,a,o[m],s,i);return s},getPrototypeOf:function(e){return O in o?o[O]:Reflect.getPrototypeOf(e)},deleteProperty:function(e,t){if(!(t in e))return!0;for(var n in o[p])o[p][n](void 0,t,e,!0,e[t]);if(t in o[f])for(var r in o[f][t])o[f][t][r]&&o[f][t][r](void 0,t,e,!0,e[t]);return delete e[t],!0}})}),o[s]}},{key:"clearBindings",value:function(e){var t;(t=function(e){return Object.keys(e).map(function(t){return delete e[t]})},function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.map(t)})(e[g],e[f],e[p],e.___after___,e.___before___)}},{key:"resolve",value:function(e,t){for(var n,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=t.split("."),i=o[0];o.length;){if(r&&1===o.length)return[this.makeBindable(e),o.shift(),i];!(!(n=o.shift())in e)&&e[n]&&e[n]instanceof Object||(e[n]={}),e=this.makeBindable(e[n])}return[this.makeBindable(e),n,i]}},{key:"wrapDelayCallback",value:function(e,t){return function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return setTimeout(function(){return e.apply(void 0,r)},t)}}},{key:"wrapThrottleCallback",value:function(e,t){var n=this;return this.throttles.set(e,!1),function(){n.throttles.get(e,!0)||(e.apply(void 0,arguments),n.throttles.set(e,!0),setTimeout(function(){n.throttles.set(e,!1)},t))}}},{key:"wrapWaitCallback",value:function(e,t){var n=this;return function(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];var a;(a=n.waiters.get(e))&&(n.waiters.delete(e),clearTimeout(a)),a=setTimeout(function(){return e.apply(void 0,o)},t),n.waiters.set(e,a)}}},{key:"wrapFrameCallback",value:function(e,t){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];requestAnimationFrame(function(){return e.apply(void 0,n)})}}},{key:"wrapIdleCallback",value:function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(window.requestIdleCallback||requestAnimationFrame)(function(){return e.apply(void 0,n)})}}}],null&&a(o.prototype,null),u&&a(o,u),t}();t.Bindable=T,u(T,"waiters",new WeakMap),u(T,"throttles",new WeakMap),Object.defineProperty(T,"OnGet",{configurable:!1,enumerable:!1,writable:!1,value:_}),Object.defineProperty(T,"GetProto",{configurable:!1,enumerable:!1,writable:!1,value:O}),Object.defineProperty(T,"OnAllGet",{configurable:!1,enumerable:!1,writable:!1,value:j})}()}),require.register("curvature/base/Cache.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Cache=void 0;var n=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,r;return n=t,r=[{key:"store",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"standard",o=0;n&&(o=1e3*n+(new Date).getTime()),this.bucket||(this.bucket={}),this.bucket[r]||(this.bucket[r]={}),this.bucket[r][e]={expiration:o,value:t}}},{key:"load",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"standard";return this.bucket&&this.bucket[n]&&this.bucket[n][e]&&(0==this.bucket[n][e].expiration||this.bucket[n][e].expiration>(new Date).getTime())?this.bucket[n][e].value:t}}],null&&e(n.prototype,null),r&&e(n,r),t}();t.Cache=n}()}),require.register("curvature/base/Config.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Config=void 0;var r={};try{r=n("/Config").Config||{}}catch(e){!0===window.devMode&&console.error(e)}var o=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,r;return n=t,r=[{key:"get",value:function(e){return this.configs[e]}},{key:"set",value:function(e,t){return this.configs[e]=t,this}},{key:"dump",value:function(){return this.configs}},{key:"init",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r in t){var o=t[r];for(var i in"string"==typeof o&&(o=JSON.parse(o)),o){var a=o[i];return this.configs[i]=a}}return this}}],null&&e(n.prototype,null),r&&e(n,r),t}();t.Config=o,Object.defineProperty(o,"configs",{configurable:!1,enumerable:!1,writable:!1,value:r})}()}),require.register("curvature/base/Dom.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Dom=void 0;var n=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,r;return n=t,r=[{key:"mapTags",value:function(e,t,n,r,o){var i=[],a=!0;r&&(a=!1);for(var u=!1,s=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT,{acceptNode:function(e,n){if(!a){if(e!==r)return NodeFilter.FILTER_SKIP;a=!0}return o&&e===o&&(u=!0),u?NodeFilter.FILTER_SKIP:t?e instanceof Element&&e.matches(t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT}},!1);s.nextNode();)i.push(n(s.currentNode,s));return i}},{key:"dispatchEvent",value:function(e,n){e.dispatchEvent(n),t.mapTags(e,!1,function(e){e.dispatchEvent(n)})}}],null&&e(n.prototype,null),r&&e(n,r),t}();t.Dom=n}()}),require.register("curvature/base/Mixin.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Mixin=void 0;var e=n("./Bindable");function r(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,i=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw i}}}}function a(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}function c(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var d=Symbol("constructor"),y=(Symbol("mixinList"),function(){function t(){v(this,t)}return function(e,t,n){n&&p(e,n)}(t,0,[{key:"from",value:function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return function(e){s(a,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}(a);function a(){var e;v(this,a);for(var u=arguments.length,s=new Array(u),f=0;f<u;f++)s[f]=arguments[f];var p,d=e=n.call.apply(n,[this].concat(s)),y=i(r);try{for(y.s();!(p=y.n()).done;){var h=p.value;switch(h[t.Constructor]&&h[t.Constructor].apply(l(e)),o(h)){case"object":t.mixObject(h,l(e))}}}catch(e){y.e(e)}finally{y.f()}return c(e,d)}return a}(e)}},{key:"to",value:function(e){for(var t={},n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];r.map(function(n){switch(o(n)){case"object":Object.assign(t,Object.getOwnPropertyDescriptors(n));break;case"function":Object.assign(t,Object.getOwnPropertyDescriptors(n.prototype))}delete t.constructor,Object.defineProperties(e.prototype,t)})}},{key:"with",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.from.apply(this,[Object].concat(t))}},{key:"mixObject",value:function(e,t){var n,r=i(Object.getOwnPropertyNames(e));try{for(r.s();!(n=r.n()).done;){var o=n.value;"function"!=typeof e[o]?t[o]=e[o]:t[o]=e[o].bind(t)}}catch(e){r.e(e)}finally{r.f()}var a,u=i(Object.getOwnPropertySymbols(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;"function"!=typeof e[s]?t[s]=e[s]:t[s]=e[s].bind(t)}}catch(e){u.e(e)}finally{u.f()}}},{key:"mixClass",value:function(e,t){var n,r=i(Object.getOwnPropertyNames(e.prototype));try{for(r.s();!(n=r.n()).done;){var o=n.value;t.prototype[o]=e.prototype[o].bind(t.prototype)}}catch(e){r.e(e)}finally{r.f()}var a,u=i(Object.getOwnPropertySymbols(e.prototype));try{for(u.s();!(a=u.n()).done;){var s=a.value;t.prototype[s]=e.prototype[s].bind(t.prototype)}}catch(e){u.e(e)}finally{u.f()}var c,l=i(Object.getOwnPropertyNames(e));try{var f=function(){var n=c.value;if("function"!=typeof e[n])return"continue";var r=t[n]||!1,o=e[n].bind(t);t[n]=function(){return r&&r.apply(void 0,arguments),o.apply(void 0,arguments)}};for(l.s();!(c=l.n()).done;)f()}catch(e){l.e(e)}finally{l.f()}var v,p=i(Object.getOwnPropertySymbols(e));try{var d=function(){var n=v.value;if("function"!=typeof e[n])return"continue";var r=t[n]||!1,o=e[n].bind(t);t[n]=function(){return r&&r.apply(void 0,arguments),o.apply(void 0,arguments)}};for(p.s();!(v=p.n()).done;)d()}catch(e){p.e(e)}finally{p.f()}}},{key:"mix",value:function(t){for(var n={},o={},a=e.Bindable.makeBindable(t),u=function(e){var t,u=Object.getOwnPropertyNames(e.prototype),s=/^(before|after)__(.+)/,c=i(Object.getOwnPropertyNames(e));try{var l=function(){var o=t.value,i=o.match(s);if(i){switch(i[1]){case"before":a.___before(function(t,n,a,u,s){if(n===i[2])return e[o].bind(u).apply(void 0,r(s))});break;case"after":a.___after(function(t,n,a,u,s){if(n===i[2])return e[o].bind(u).apply(void 0,r(s))})}return"continue"}return n[o]||"function"!=typeof e[o]?"continue":void(n[o]=e[o])};for(c.s();!(t=c.n()).done;)l()}catch(e){c.e(e)}finally{c.f()}var f,v=i(u);try{var p=function(){var t=f.value,n=t.match(s);if(n){switch(n[1]){case"before":a.___before(function(o,i,a,u,s){if(i===n[2])return e.prototype[t].bind(u).apply(void 0,r(s))});break;case"after":a.___after(function(o,i,a,u,s){if(i===n[2])return e.prototype[t].bind(u).apply(void 0,r(s))})}return"continue"}return o[t]||"function"!=typeof e.prototype[t]?"continue":void(o[t]=e.prototype[t])};for(v.s();!(f=v.n()).done;)p()}catch(e){v.e(e)}finally{v.f()}},s=this;s&&s.prototype;s=Object.getPrototypeOf(s))u(s);for(var c in n)t[c]=n[c].bind(t);var l=function(e){t.prototype[e]=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return o[e].apply(this,n)}};for(var f in o)l(f);return a}}]),t}());t.Mixin=y,y.Constructor=d}()}),require.register("curvature/base/Router.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Router=void 0;var e=n("./View"),r=(n("./Cache"),n("./Config")),o=n("./Routes");function i(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,i=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw i}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=Symbol("NotFound"),c=Symbol("Internal"),l=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,a;return n=t,a=[{key:"wait",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"DOMContentLoaded";(arguments.length>2&&void 0!==arguments[2]?arguments[2]:document).addEventListener(n,function(){t.listen(e)})}},{key:"listen",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.routes=n||e.routes,Object.assign(this.query,this.queryOver({}));var r=function(n){for(var r in n.preventDefault(),n.state&&"routedId"in n.state?n.state.routedId<=t.routeCount?(t.history.splice(n.state.routedId),t.routeCount=n.state.routedId):n.state.routedId>t.routeCount&&(t.history.push(n.state.prev),t.routeCount=n.state.routedId):null!==t.prevPath&&t.prevPath!==location.pathname&&t.history.push(t.prevPath),"null"!==location.origin?t.match(location.pathname,e):t.match(t.nextPath,e),t.query)delete t.query[r];Object.assign(t.query,t.queryOver({}))};window.addEventListener("popstate",r),window.addEventListener("cvUrlChanged",r);var o="null"!==location.origin&&location.pathname+location.search;location.origin&&location.hash&&(o+=location.hash),this.go(!1!==o?o:"/")}},{key:"go",value:function(e,t){var n=r.Config.get("title");for(var o in n&&(document.title=n),"null"===location.origin?this.nextPath=e:2===t&&location.pathname!==e?history.replaceState({routedId:this.routeCount,prev:this.prevPath,url:location.pathname},null,e):location.pathname!==e&&history.pushState({routedId:++this.routeCount,prev:this.prevPath,url:location.pathname},null,e),t||(!1===t&&(this.path=null),"#"===e.substring(0,1)?window.dispatchEvent(new HashChangeEvent("hashchange")):window.dispatchEvent(new CustomEvent("cvUrlChanged"))),this.query)delete this.query[o];Object.assign(this.query,this.queryOver({})),this.prevPath=e}},{key:"match",value:function(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.path!==t||i){this.queryString=location.search,this.path=t;var a=this.prevPath,u=n.args.content,c=this.routes||n.routes||o.Routes.dump();for(var l in new URLSearchParams(location.search),this.query)delete this.query[l];Object.assign(this.query,this.queryOver({}));var f={},v=!1,p="";for(var d in t=t.substr(1).split("/"),this.query)f[d]=this.query[d];e:for(var y in c){var h=y.split("/");if(!(h.length<t.length&&"*"!==h[h.length-1])){for(var b in h)if("%"==h[b].substr(0,1)){var m=null,g=/^%(\w+)\??/.exec(h[b]);if(g&&g[1]&&(m=g[1]),!m)throw new Error("".concat(h[b],' is not a valid argument segment in route "').concat(y,'"'));if(t[b])f[m]=t[b];else{if("?"!=h[b].substr(h[b].length-1,1))continue e;f[m]=""}}else if("*"!==h[b]&&t[b]!==h[b])continue e;v=y,p=c[y],"*"===h[h.length-1]&&(f.pathparts=t.slice(h.length-1));break}}var w=new CustomEvent("cvRouteStart",{cancelable:!0,detail:{path:t,prev:a,root:n,selected:v,routes:c}});if(document.dispatchEvent(w)){if(!i&&n&&u&&p instanceof Object&&u instanceof p&&!(p instanceof Promise)&&u.update(f))return n.args.content=u,!0;try{v in c||(c[v]=c[s]);var O=function(t){return"function"==typeof c[t]?c[t].prototype instanceof e.View?new c[t](f):c[t](f):c[t]};return!1===(p=O(v))&&(p=O(s)),p instanceof Promise?p.then(function(e){r.update(n,t,e,c,v,f,i)}).catch(function(e){throw document.dispatchEvent(new CustomEvent("cvRouteError",{detail:{error:e,path:t,prev:a,view:n,routes:c,selected:v}})),r.update(n,t,window.devMode?String(e):"Error: 500",c,v,f,i),e}):this.update(n,t,p,c,v,f,i)}catch(e){throw document.dispatchEvent(new CustomEvent("cvRouteError",{detail:{error:e,path:t,prev:a,view:n,routes:c,selected:v}})),this.update(n,t,window.devMode?String(e):"Error: 500",c,v,f,i),e}}}}},{key:"update",value:function(t,n,r,o,i,a,u){if(t){var s=this.prevPath,c=new CustomEvent("cvRoute",{cancelable:!0,detail:{result:r,path:n,prev:s,view:t,routes:o,selected:i}});!1!==r&&(t.args.content instanceof e.View&&(t.args.content.pause(!0),t.args.content.remove()),document.dispatchEvent(c)&&(t.args.content=r),r instanceof e.View&&(r.pause(!1),r.update(a,u)));var l=new CustomEvent("cvRouteEnd",{cancelable:!0,detail:{result:r,path:n,prev:s,view:t,routes:o,selected:i}});document.dispatchEvent(l)}}},{key:"queryOver",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n={},r={},o=i(new URLSearchParams(location.search));try{for(o.s();!(e=o.n()).done;){var a=e.value;r[a[0]]=a[1]}}catch(e){o.e(e)}finally{o.f()}return delete(n=Object.assign(n,r,t)).api,n}},{key:"queryToString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[],r=e;for(var o in t||(r=this.queryOver(e)),r)""!==r[o]&&n.push(o+"="+encodeURIComponent(r[o]));return n.join("&")}},{key:"setQuery",value:function(e,t,n){var r=this.queryOver();r[e]=t,void 0===t&&delete r[e];var o=this.queryToString(r,!0);this.go(location.pathname+(o?"?"+o:""),n)}}],null&&u(n.prototype,null),a&&u(n,a),t}();t.Router=l,Object.defineProperty(l,"query",{configurable:!1,enumerable:!1,writable:!1,value:{}}),Object.defineProperty(l,"history",{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(l,"routeCount",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(l,"prevPath",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(l,"queryString",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(l,"InternalError",{configurable:!1,enumerable:!1,writable:!1,value:c}),Object.defineProperty(l,"NotFoundError",{configurable:!1,enumerable:!1,writable:!1,value:s})}()}),require.register("curvature/base/Routes.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Routes=void 0;var r={};try{Object.assign(r,n("Routes").Routes||{})}catch(e){!0===globalThis.devMode&&console.warn(e)}var o=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,r;return n=t,r=[{key:"get",value:function(e){return this.routes[e]}},{key:"dump",value:function(){return this.routes}}],null&&e(n.prototype,null),r&&e(n,r),t}();t.Routes=o,Object.defineProperty(o,"routes",{configurable:!1,enumerable:!1,writable:!1,value:r})}()}),require.register("curvature/base/RuleSet.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RuleSet=void 0,n("./Dom");var e=n("./Tag"),r=n("./View");function o(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,a=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw a}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,i,u;return n=t,u=[{key:"add",value:function(e,t){return this.globalRules=this.globalRules||{},this.globalRules[e]=this.globalRules[e]||[],this.globalRules[e].push(t),this}},{key:"apply",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;for(var n in this.globalRules)for(var r in this.globalRules[n]){var i,a=this.globalRules[n][r],u=this.wrap(e,a,t),s=o(e.querySelectorAll(n));try{for(s.s();!(i=s.n()).done;){u(i.value)}}catch(e){s.e(e)}finally{s.f()}}}},{key:"wait",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"DOMContentLoaded",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,r=function(t,n){return function(){return n.removeEventListener(t,r),e.apply()}}(t,n);n.addEventListener(t,r)}},{key:"wrap",value:function(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return(n instanceof r.View||n&&n.prototype&&n.prototype instanceof r.View)&&(n=function(e){return function(){return e}}(n)),function(t){for(var i in void 0===t.___cvApplied___&&Object.defineProperty(t,"___cvApplied___",{enumerable:!1,writable:!1,value:[]}),t.___cvApplied___)if(n==t.___cvApplied___[i])return;var a,u;o&&(a=u=o,o.viewList&&(u=o.viewList.parent)),u&&u.onRemove(function(){return t.___cvApplied___.splice(0)});var s,c=new e.Tag(t,u,null,void 0,a),l=c.element.parentNode,f=c.element.nextSibling,v=n(c);if(!1!==v&&t.___cvApplied___.push(n),v instanceof HTMLElement&&(v=new e.Tag(v)),v instanceof e.Tag){if(!v.element.contains(c.element)){for(;c.element.firstChild;)v.element.appendChild(c.element.firstChild);c.remove()}f?l.insertBefore(v.element,f):l.appendChild(v.element)}v&&v.prototype&&v.prototype instanceof r.View&&(v=new v({},o)),v instanceof r.View&&(o&&(o.cleanup.push((s=v,function(){s.remove()})),o.cleanup.push(o.args.bindTo(function(e,t,n){n[t]=e,v.args[t]=e})),o.cleanup.push(v.args.bindTo(function(e,t,n,r){n[t]=e,o.args[t]=e}))),c.clear(),v.render(c.element))}}}],(i=[{key:"add",value:function(e,t){return this.rules=this.rules||{},this.rules[e]=this.rules[e]||[],this.rules[e].push(t),this}},{key:"apply",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;for(var r in t.apply(e,n),this.rules)for(var i in this.rules[r]){var a,u=this.rules[r][i],s=t.wrap(e,u,n),c=o(e.querySelectorAll(r));try{for(c.s();!(a=c.n()).done;){s(a.value)}}catch(e){c.e(e)}finally{c.f()}}}}])&&a(n.prototype,i),u&&a(n,u),t}();t.RuleSet=u}()}),require.register("curvature/base/Tag.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Tag=void 0;var e=n("./Bindable");function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function t(n,r,o,i,a){var u,s=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),"string"==typeof n){var c=document.createRange().createContextualFragment(n);n=c.firstChild}return this.element=e.Bindable.makeBindable(n),this.node=this.element,this.parent=r,this.direct=a,this.ref=o,this.index=i,this.cleanup=[],this[e.Bindable.OnAllGet]=function(e){return"function"==typeof s[e]?s[e]:s.node&&"function"==typeof s.node[e]?function(){var t;return(t=s.node)[e].apply(t,arguments)}:s.node&&e in s.node?s.node[e]:s[e]},this.style=(u=this,e.Bindable.make(function(e){if(u.node)for(var t in e)"-"===t[0]&&u.node.style.setProperty(t,e[t]),u.node.style[t]=e[t]})),this.proxy=e.Bindable.make(this),this.proxy.style.bindTo(function(e,t){s.element.style[t]=e}),this.proxy.bindTo(function(e,t){return t in n&&(n[t]=e),!1}),this.proxy}var n,o;return n=t,(o=[{key:"attr",value:function(e){for(var t in e)void 0===e[t]?this.node.removeAttribute(t):null===e[t]?this.node.setAttribute(t,""):this.node.setAttribute(t,e[t])}},{key:"remove",value:function(){var t;for(this.node&&this.node.remove(),e.Bindable.clearBindings(this);t=this.cleanup.shift();)t();if(this.clear(),this.node){var n=new Event("cvDomDetached");this.node.dispatchEvent(n),this.node=this.element=this.ref=this.parent=void 0}}},{key:"clear",value:function(){if(this.node)for(var e=new Event("cvDomDetached");this.node.firstChild;)this.node.firstChild.dispatchEvent(e),this.node.removeChild(this.node.firstChild)}},{key:"pause",value:function(){}},{key:"listen",value:function(e,t,n){var r=this.node;r.addEventListener(e,t,n);var o=function(){r.removeEventListener(e,t,n)},i=function(){o(),o=function(){return console.warn("Already removed!")}};return this.parent.onRemove(function(){return i()}),i}}])&&r(n.prototype,o),t}();t.Tag=o}()}),require.register("curvature/base/View.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.View=void 0;var e=n("./Bindable"),r=n("./ViewList"),o=n("./Router"),i=n("./Dom"),a=n("./Tag"),u=n("./Bag"),s=n("./RuleSet"),c=n("./Mixin"),l=(n("../mixin/PromiseMixin"),n("../mixin/EventTargetMixin"));function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||y(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}}(e,t)||y(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=y(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function y(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t,n){return t&&b(e.prototype,t),n&&b(e,n),e}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?O(e):t}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var j=Symbol("dontParse"),k=Symbol("expandBind"),S=Symbol("uuid"),P=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(l,t);var c=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=_(e);if(t){var o=_(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return w(this,n)}}(l);function l(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),t=c.call(this,n,r),Object.defineProperty(O(t),"args",{value:e.Bindable.make(n)}),Object.defineProperty(O(t),S,{value:t.uuid()}),Object.defineProperty(O(t),"nodesAttached",{value:new u.Bag(function(e,t,n){})}),Object.defineProperty(O(t),"nodesDetached",{value:new u.Bag(function(e,t,n){})}),Object.defineProperty(O(t),"_onRemove",{value:new u.Bag(function(e,t,n){})}),Object.defineProperty(O(t),"cleanup",{value:[]}),Object.defineProperty(O(t),"parent",{value:r}),Object.defineProperty(O(t),"views",{value:new Map}),Object.defineProperty(O(t),"viewLists",{value:new Map}),Object.defineProperty(O(t),"withViews",{value:new Map}),Object.defineProperty(O(t),"tags",{value:e.Bindable.make({})}),Object.defineProperty(O(t),"nodes",{value:e.Bindable.make([])}),Object.defineProperty(O(t),"timeouts",{value:new Map}),Object.defineProperty(O(t),"intervals",{value:[]}),Object.defineProperty(O(t),"frames",{value:[]}),Object.defineProperty(O(t),"ruleSet",{value:new s.RuleSet}),Object.defineProperty(O(t),"preRuleSet",{value:new s.RuleSet}),Object.defineProperty(O(t),"subBindings",{value:{}}),Object.defineProperty(O(t),"templates",{value:{}}),Object.defineProperty(O(t),"eventCleanup",{value:[]}),Object.defineProperty(O(t),"unpauseCallbacks",{value:new Map}),Object.defineProperty(O(t),"interpolateRegex",{value:/(\[\[((?:\$+)?[\w\.\|-]+)\]\])/g}),Object.defineProperty(O(t),"rendered",{value:new Promise(function(e,n){return Object.defineProperty(O(t),"renderComplete",{value:e})})}),t.template="",t.firstNode=null,t.lastNode=null,t.viewList=null,t.mainView=null,t.preserve=!1,t.removed=!1,w(t,e.Bindable.make(O(t)))}return m(l,[{key:"_id",get:function(){return this[S]}}],[{key:"from",value:function(e){var t=new this(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2&&void 0!==arguments[2]?arguments[2]:null);return t.template=e,t}}]),m(l,[{key:"onFrame",value:function(e){var t=this,n=!1,r=function(){n=!0};return requestAnimationFrame(function(){return function r(o){t.removed||n||(t.paused||e(Date.now()),requestAnimationFrame(r))}(Date.now())}),this.frames.push(r),r}},{key:"onNextFrame",value:function(e){return requestAnimationFrame(function(){return e(Date.now())})}},{key:"onIdle",value:function(e){return requestIdleCallback(function(){return e(Date.now())})}},{key:"onTimeout",value:function(e,t){var n=this,r={timeout:null,callback:null,time:e,fired:!1,created:(new Date).getTime(),paused:!1},o=function(){t(),r.fired=!0,n.timeouts.delete(r.timeout)},i=setTimeout(o,e);return r.callback=o,r.timeout=i,this.timeouts.set(r.timeout,r),i}},{key:"clearTimeout",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){var t,n=d(this.timeouts);try{for(n.s();!(t=n.n()).done;){var r=p(t.value,2),o=(r[0],r[1]);clearTimeout(o.timeout),this.timeouts.delete(o.timeout)}}catch(e){n.e(e)}finally{n.f()}})},{key:"onInterval",value:function(e,t){var n=setInterval(t,e);return this.intervals.push({timeout:n,callback:t,time:e,paused:!1}),n}},{key:"clearInterval",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){for(var t in this.intervals)e===this.intervals[t].timeout&&(clearInterval(this.intervals[t].timeout),delete this.intervals[t])})},{key:"pause",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(void 0===e&&(this.paused=!this.paused),this.paused=e,this.paused){var t,n=d(this.timeouts);try{for(n.s();!(t=n.n()).done;){var r=p(t.value,2),o=(r[0],r[1]);o.fired?this.timeouts.delete(o.timeout):(clearTimeout(o.timeout),o.paused=!0,o.time=Math.max(0,o.time-(Date.now()-o.created)))}}catch(e){n.e(e)}finally{n.f()}for(var i in this.intervals)clearInterval(this.intervals[i].timeout)}else{var a,u=d(this.timeouts);try{for(u.s();!(a=u.n()).done;){var s=p(a.value,2),c=(s[0],s[1]);c.paused&&(c.fired?this.timeouts.delete(c.timeout):(c.timeout=setTimeout(c.callback,c.time),c.paused=!1))}}catch(e){u.e(e)}finally{u.f()}for(var l in this.intervals)this.intervals[l].timeout.paused&&(this.intervals[l].timeout.paused=!1,this.intervals[l].timeout=setInterval(this.intervals[l].callback,this.intervals[l].time));var f,v=d(this.unpauseCallbacks);try{for(v.s();!(f=v.n()).done;){(0,p(f.value,2)[1])()}}catch(e){v.e(e)}finally{v.f()}this.unpauseCallbacks.clear()}var y,h=d(this.viewLists);try{for(h.s();!(y=h.n()).done;){var b=p(y.value,2);(b[0],b[1]).pause(!!e)}}catch(e){h.e(e)}finally{h.f()}for(var m in this.tags)if(Array.isArray(this.tags[m]))for(var g in this.tags[m])this.tags[m][g].pause(!!e);else this.tags[m].pause(!!e)}},{key:"render",value:function(){var e,t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(n instanceof l&&(n=n.firstNode.parentNode),r instanceof l&&(r=r.firstNode),this.firstNode)return this.reRender(n,r);this.dispatchEvent(new CustomEvent("render"));var o=this.template instanceof DocumentFragment?this.template.cloneNode(!0):l.templates.has(this.template),i=o?this.template instanceof DocumentFragment?o:l.templates.get(this.template).cloneNode(!0):document.createRange().createContextualFragment(this.template);if(o||this.template instanceof DocumentFragment||l.templates.set(this.template,i.cloneNode(!0)),this.mainView||this.preRuleSet.apply(i,this),this.mapTags(i),this.mainView||this.ruleSet.apply(i,this),!0===window.devMode?(this.firstNode=document.createComment("Template ".concat(this._id," Start")),this.lastNode=document.createComment("Template ".concat(this._id," End"))):(this.firstNode=document.createTextNode(""),this.lastNode=document.createTextNode("")),(e=this.nodes).push.apply(e,[this.firstNode].concat(v(Array.from(i.childNodes)),[this.lastNode])),this.postRender(n),this.dispatchEvent(new CustomEvent("rendered")),this.dispatchAttach()){if(n){var a=n.getRootNode(),u=!1;a.isConnected&&(u=!0),r?(n.insertBefore(this.firstNode,r),n.insertBefore(this.lastNode,r)):(n.appendChild(this.firstNode),n.appendChild(this.lastNode)),n.insertBefore(i,this.lastNode),u?(this.attached(a,n),this.dispatchAttached(a,n)):n.addEventListener("cvDomAttached",function(){t.attached(a,n),t.dispatchAttached(a,n)},{once:!0})}return this.renderComplete(this.nodes),this.nodes}}},{key:"dispatchAttach",value:function(){return this.dispatchEvent(new CustomEvent("attach",{cancelable:!0,target:this}))}},{key:"dispatchAttached",value:function(e,t){this.dispatchEvent(new CustomEvent("attached",{target:this}));var n=this.nodesAttached.items();for(var r in n)n[r](e,t);this.nodes.filter(function(e){return e.nodeType!==Node.COMMENT_NODE}).map(function(e){e.matches&&(i.Dom.mapTags(e,!1,function(e,t){e.matches&&e.dispatchEvent(new Event("cvDomAttached",{target:e}))}),e.dispatchEvent(new Event("cvDomAttached",{target:e})))})}},{key:"reRender",value:function(e,t){if(this.dispatchEvent(new CustomEvent("reRender"),{cancelable:!0,target:this})){var n=new DocumentFragment;if(this.firstNode.isConnected){var r=this.nodesDetached.items();for(var o in r)r[o]()}if(n.append.apply(n,v(this.nodes)),e){t?(e.insertBefore(this.firstNode,t),e.insertBefore(this.lastNode,t)):(e.appendChild(this.firstNode),e.appendChild(this.lastNode)),e.insertBefore(n,this.lastNode),this.dispatchEvent(new CustomEvent("reRendered"),{cancelable:!0,target:this});var i=e.getRootNode();i.isConnected&&(this.attached(i,e),this.dispatchAttached(i,e))}return this.nodes}}},{key:"mapTags",value:function(e){var t=this;i.Dom.mapTags(e,!1,function(e,n){e[j]||(e=e.matches?(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=t.mapInterpolatableTag(e)).matches("[cv-template]")&&t.mapTemplateTag(e)||e).matches("[cv-slot]")&&t.mapSlotTag(e)||e).matches("[cv-prerender]")&&t.mapPrendererTag(e)||e).matches("[cv-link]")&&t.mapLinkTag(e)||e).matches("[cv-attr]")&&t.mapAttrTag(e)||e).matches("[cv-expand]")&&t.mapExpandableTag(e)||e).matches("[cv-ref]")&&t.mapRefTag(e)||e).matches("[cv-on]")&&t.mapOnTag(e)||e).matches("[cv-each]")&&t.mapEachTag(e)||e).matches("[cv-bind]")&&t.mapBindTag(e)||e).matches("[cv-with]")&&t.mapWithTag(e)||e).matches("[cv-if]")&&t.mapIfTag(e)||e).matches("[cv-view]")&&t.mapViewTag(e)||e:t.mapInterpolatableTag(e))!==n.currentNode&&(n.currentNode=e)})}},{key:"mapExpandableTag",value:function(t){var n=t[k];n&&(n(),t[k]=!1);var r=p(e.Bindable.resolve(this.args,t.getAttribute("cv-expand"),!0),2),o=r[0],i=r[1];return t.removeAttribute("cv-expand"),o[i]||(o[i]={}),o[i]=e.Bindable.make(o[i]),this.onRemove(t[k]=o[i].bindTo(function(e,n,r,o,i){o||void 0===e?t.removeAttribute(n,e):null!==e?t.setAttribute(n,e):t.setAttribute(n,"")})),t}},{key:"compileExpandableTag",value:function(t){return function(n){var r=t.cloneNode(!0),o=r.getAttribute("cv-expand"),i=e.Bindable.make(n.args[o]||{});r.removeAttribute("cv-expand");var a=function(t){if("name"===t||"type"===t)return"continue";var o=i.bindTo(t,function(e,t){return function(n){e.setAttribute(t,n)}}(r,t));n.onRemove(function(){o(),i.isBound()&&e.Bindable.clearBindings(i)})};for(var u in i)a(u);return r}}},{key:"mapAttrTag",value:function(e){var t=this.compileAttrTag(e)(this);return e.replaceWith(t),t}},{key:"compileAttrTag",value:function(t){var n=t.getAttribute("cv-attr").split(",").map(function(e){return e.split(":")});return t.removeAttribute("cv-attr"),function(r){var o=t.cloneNode(!0),i=function(t){var i=n[t][1]||n[t][0],a=p(e.Bindable.resolve(r.args,i,!0),2),u=a[0],s=a[1],c=n[t][0];r.onRemove(u.bindTo(s,function(e,t,n,r){r||void 0===e?o.removeAttribute(c,e):null!==e?o.setAttribute(c,e):o.setAttribute(c,"")}))};for(var a in n)i(a);return o}}},{key:"mapInterpolatableTag",value:function(t){var n=this,r=this.interpolateRegex;if(t.nodeType===Node.TEXT_NODE){var o=t.nodeValue;if(!this.interpolatable(o))return t;for(var i,u=0,s=function(){var r=i[2],s=!1,c=!1,f=r.split("|"),v=!1;if(f.length>1&&(v=n.stringTransformer(f.slice(1)),r=f[0]),"$$"===r.substr(0,2)&&(s=!0,c=!0,r=r.substr(2)),"$"===r.substr(0,1)&&(s=!0,r=r.substr(1)),"000"===r.substr(0,3))return expand=!0,r=r.substr(3),"continue";var d=o.substring(u,i.index);u=i.index+i[1].length;var y=document.createTextNode(d);y[j]=!0,t.parentNode.insertBefore(y,t);var h=void 0;(h=s?document.createElement("div"):document.createTextNode(""))[j]=!0;var b=n.args,m=r;if(r.match(/\./)){var g=p(e.Bindable.resolve(n.args,r,!0),2);b=g[0],m=g[1]}t.parentNode.insertBefore(h,t);var w=b.bindTo(m,function(e,r,o){if(o[r]!==e&&(o[r]instanceof l||o[r]instanceof Node||o[r]instanceof a.Tag)&&(o[r].preserve||o[r].remove()),h.nodeValue="",c&&!(e instanceof l)){var i=e;(e=new l(n.args,n)).template=i}if(v&&(e=v(e)),e instanceof l){var u=function(t){e.dispatchAttach()&&(e.attached(t),e.dispatchAttached())};n.nodesAttached.add(u),e.render(t.parentNode,h);var f=function(){e.preserve||e.remove()};n.onRemove(f),e.onRemove(function(){n.nodesAttached.remove(u),n._onRemove.remove(f)})}else e instanceof Node?(t.parentNode.insertBefore(e,h),n.onRemove(function(){return e.remove()})):e instanceof a.Tag?(t.parentNode.insertBefore(e.node,h),n.onRemove(function(){return e.remove()})):(e instanceof Object&&e.__toString instanceof Function&&(e=e.__toString()),s?h.innerHTML=e:h.nodeValue=e);h[j]=!0});n.onRemove(w)};i=r.exec(o);)s();var c=o.substring(u),f=document.createTextNode(c);f[j]=!0,t.parentNode.insertBefore(f,t),t.nodeValue=""}else if(t.nodeType===Node.ELEMENT_NODE)for(var v=function(o){if(!n.interpolatable(t.attributes[o].value))return"continue";for(var i=0,a=void 0,u=t.attributes[o].value,s=t.attributes[o],c={},l=[];a=r.exec(u);)l.push(u.substring(i,a.index)),c[a[2]]||(c[a[2]]=[]),c[a[2]].push(l.length),l.push(a[1]),i=a.index+a[1].length;l.push(u.substring(i));var f=function(r){var o=n.args,i=r,a=r.split("|"),u=!1,f=r;if(a.length>1&&(u=n.stringTransformer(a.slice(1)),i=a[0]),i.match(/\./)){var v=p(e.Bindable.resolve(n.args,i,!0),2);o=v[0],i=v[1]}c[f],n.onRemove(o.bindTo(i,function(e,r,o,a){for(var v in u&&(e=u(e)),c)for(var p in c[f])l[c[f][p]]=o[v],r===i&&(l[c[f][p]]=e);n.paused?n.unpauseCallbacks.set(s,function(){return t.setAttribute(s.name,l.join(""))}):t.setAttribute(s.name,l.join(""))})),n.onRemove(function(){o.isBound()||e.Bindable.clearBindings(o)})};for(var v in c)f(v)},d=0;d<t.attributes.length;d++)v(d);return t}},{key:"mapRefTag",value:function(e){var t=p(e.getAttribute("cv-ref").split(":"),3),n=t[0],r=t[1],o=void 0===r?null:r,i=t[2],u=void 0===i?null:i,s=a.Tag;o&&(s=this.stringToClass(o)),e.removeAttribute("cv-ref"),Object.defineProperty(e,"___tag___",{enumerable:!1,writable:!0}),this.onRemove(function(){e.___tag___=null,e.remove()});var c=this;this.viewList&&(c=this.viewList.parent);var l=new s(e,this,n,void 0,this);for(e.___tag___=l,this.tags[n]=l;c;){c.parent;var f=this.args[u];void 0!==f?(c.tags[n]||(c.tags[n]=[]),c.tags[n][f]=l):c.tags[n]=l,c=c.parent}return e}},{key:"mapBindTag",value:function(t){var n=this,r=t.getAttribute("cv-bind"),o=this.args,u=r,s=null;if(r.match(/\./)){var c=p(e.Bindable.resolve(this.args,r,!0),3);o=c[0],u=c[1],s=c[2]}o!==this.args&&(this.subBindings[r]=this.subBindings[r]||[],this.onRemove(this.args.bindTo(s,function(){for(;n.subBindings.length;)n.subBindings.shift()()})));var f=!1;"$"===u.substr(0,1)&&(u=u.substr(1),f=!0);var v=o.bindTo(u,function(e,r,o,u,s){(s instanceof l||s instanceof Node||s instanceof a.Tag)&&s!==e&&s.remove();var c=new CustomEvent("cvAutoChanged",{bubbles:!0});if(["INPUT","SELECT","TEXTAREA"].includes(t.tagName)){var v=t.getAttribute("type");if(v&&"checkbox"===v.toLowerCase())t.checked=!!e,t.dispatchEvent(c);else if(v&&"radio"===v.toLowerCase())t.checked=e==t.value,t.dispatchEvent(c);else if("file"!==v){if("SELECT"===t.tagName){var p=function(){for(var n=0;n<t.options.length;n++)t.options[n].value==e&&(t.selectedIndex=n)};p(),n.nodesAttached.add(p)}else t.value=null==e?"":e;t.dispatchEvent(c)}}else if(e instanceof l){var y,h=d(t.childNodes);try{for(h.s();!(y=h.n()).done;)y.value.remove()}catch(e){h.e(e)}finally{h.f()}var b=function(t){e.dispatchAttach()&&(e.attached(t),e.dispatchAttached())};n.nodesAttached.add(b),e.render(t),e.onRemove(function(){return n.nodesAttached.remove(b)})}else if(e instanceof Node)t.insert(e);else if(e instanceof a.Tag)t.append(e.node);else if(f){if(t.innerHTML!==e){if(e=String(e),t.innerHTML===e.substring(0,t.innerHTML.length))t.innerHTML+=e.substring(t.innerHTML.length);else{var m,g=d(t.childNodes);try{for(g.s();!(m=g.n()).done;)m.value.remove()}catch(e){g.e(e)}finally{g.f()}t.innerHTML=e}i.Dom.mapTags(t,!1,function(e){return e[j]=!0})}}else if(t.textContent!==e){var w,O=d(t.childNodes);try{for(O.s();!(w=O.n()).done;)w.value.remove()}catch(e){O.e(e)}finally{O.f()}t.textContent=e}});o!==this.args&&this.subBindings[r].push(v),this.onRemove(v);var y=t.getAttribute("type"),h=t.getAttribute("multiple"),b=function(n){if(n.target===t)if(y&&"checkbox"===y.toLowerCase())t.checked?o[u]=n.target.getAttribute("value"):o[u]=!1;else if(n.target.matches("[contenteditable=true]"))o[u]=n.target.innerHTML;else if("file"===y&&h){var r=Array.from(n.target.files),i=o[u]||e.Bindable.onDeck(o,u);if(i&&r.length){var a=function(e){if(r[e]!==i[e])return r[e].toJSON=function(){return{name:file[e].name,size:file[e].size,type:file[e].type,date:file[e].lastModified}},i[e]=r[e],"break"};for(var s in r)if("break"===a(s))break}else o[u]=r}else if("file"!==y||h)o[u]=n.target.value;else{var c=n.target.files.item(0);c.toJSON=function(){return{name:c.name,size:c.size,type:c.type,date:c.lastModified}},o[u]=c}};return"file"===y||"radio"===y?t.addEventListener("change",b):(t.addEventListener("input",b),t.addEventListener("change",b),t.addEventListener("value-changed",b)),this.onRemove(function(){"file"===y||"radio"===y?t.removeEventListener("change",b):(t.removeEventListener("input",b),t.removeEventListener("change",b),t.removeEventListener("value-changed",b))}),t.removeAttribute("cv-bind"),t}},{key:"mapOnTag",value:function(e){var t=this;return String(e.getAttribute("cv-on")).split(";").map(function(e){return e.split(":")}).map(function(n){var r,o=(n=n.map(function(e){return e.trim()})).length,i=String(n.shift()).trim(),a=String(n.shift()||i).trim(),u=String(n.shift()||"").trim(),s=[],c=/(\w+)(?:\(([$\w\s-'",]+)\))?/.exec(a);c?(a=c[1].replace(/(^[\s\n]+|[\s\n]+$)/,""),c[2]&&(s=c[2].split(",").map(function(e){return e.trim()})),c.length):s.push("$event"),i&&1!==o||(i=a);for(var l=t;l&&("function"!=typeof l[a]||"break"!==function(){var e=l,t=a;return r=function(){e[t].apply(e,arguments)},"break"}())&&l.parent;)l=l.parent;var f=function(n){var o=s.map(function(r){var o;return parseInt(r)==r?r:"event"===r||"$event"===r?n:"$view"===r?l:"$tag"===r?e:"$parent"===r?t.parent:"$subview"===r?t:r in t.args?t.args[r]:(o=/^['"]([\w-]+?)["']$/.exec(r))?o[1]:void 0});if("function"!=typeof r)throw new Error("".concat(a," is not defined on View object.")+"\nTag:\n"+"".concat(e.outerHTML));r.apply(void 0,v(o))},p={};switch(u.includes("p")?p.passive=!0:u.includes("P")&&(p.passive=!1),u.includes("c")?p.capture=!0:u.includes("C")&&(p.capture=!1),u.includes("o")?p.once=!0:u.includes("O")&&(p.once=!1),i){case"_init":f();break;case"_attach":t.nodesAttached.add(f);break;case"_detach":t.nodesDetached.add(f);break;default:e.addEventListener(i,f,p),t.onRemove(function(){e.removeEventListener(i,f,p)})}return[i,a,s]}),e.removeAttribute("cv-on"),e}},{key:"mapLinkTag",value:function(e){var t=e.getAttribute("cv-link");e.setAttribute("href",t);var n=function(n){n.preventDefault(),"http"!==t.substring(0,4)&&"//"!==t.substring(0,2)?o.Router.go(e.getAttribute("href")):window.open(e.getAttribute("href",t))};return e.addEventListener("click",n),this.onRemove(function(e,t){return function(){e.removeEventListener("click",t),e=void 0,t=void 0}}(e,n)),e.removeAttribute("cv-link"),e}},{key:"compileLinkTag",value:function(e){var t=e.getAttribute("cv-link");return e.removeAttribute("cv-link"),function(n){var r=e.cloneNode(!0);return r.setAttribute("href",t),r}}},{key:"mapPrendererTag",value:function(e){var t=e.getAttribute("cv-prerender"),n=window.prerenderer||navigator.userAgent.match(/prerender/i);return n&&(window.prerenderer=window.prerenderer||!0),("never"===t&&n||"only"===t&&!n)&&e.parentNode.removeChild(e),e}},{key:"mapWithTag",value:function(t){var n=this,r=t.getAttribute("cv-with"),o=t.getAttribute("cv-carry"),i=t.getAttribute("cv-view");t.removeAttribute("cv-with"),t.removeAttribute("cv-carry"),t.removeAttribute("cv-view");var a=i?this.stringToClass(i):l,u=new DocumentFragment;v(t.childNodes).map(function(e){return u.appendChild(e)});var s=[];o&&(s=o.split(",").map(function(e){return e.trim()}));var c=this.args.bindTo(r,function(r,o,i,c){for(n.withViews.has(t)&&n.withViews.delete(t);t.firstChild;)t.removeChild(t.firstChild);var l=new a({},n);n.onRemove(function(e){return function(){e.remove()}}(l)),l.template=u;var f=function(e){var t=n.args.bindTo(s[e],function(e,t){l.args[t]=e});l.onRemove(t),n.onRemove(function(){t(),l.remove()})};for(var v in s)f(v);var p=function(t){var o=r.bindTo(t,function(e,t){l.args[t]=e});l.args.bindTo(t,function(e,t){r[t]=e}),n.onRemove(function(){o(),r.isBound()||e.Bindable.clearBindings(r),l.remove()}),l.onRemove(function(){o(),r.isBound()||e.Bindable.clearBindings(r)})};for(var d in r)p(d);l.render(t),n.withViews.set(t,l)});return this.onRemove(function(){n.withViews.delete(t),c()}),t}},{key:"mapViewTag",value:function(e){var t=this,n=e.getAttribute("cv-view");e.removeAttribute("cv-view");var r=new DocumentFragment;v(e.childNodes).map(function(e){return r.appendChild(e)});var o=n.split(":"),i=o.pop()?this.stringToClass(n):l,a=o.shift(),u=new i(this.args,this);return this.views.set(e,u),a&&this.views.set(a,u),this.onRemove(function(n){return function(){n.remove(),t.views.delete(e),t.views.delete(a)}}(u)),u.template=r,u.render(e),e}},{key:"mapEachTag",value:function(e){var t=this,n=e.getAttribute("cv-each"),o=e.getAttribute("cv-view");e.removeAttribute("cv-each"),e.removeAttribute("cv-view");var i=o?this.stringToClass(o):l,a=new DocumentFragment;Array.from(e.childNodes).map(function(e){return a.appendChild(e)});var u=p(n.split(":"),3),s=u[0],c=u[1],f=u[2],v=this.args.bindTo(s,function(n,o,u,s,l){t.viewLists.has(e)&&t.viewLists.get(e).remove();var v=new r.ViewList(a,c,n,t,f,i),p=function(){return v.remove()};t.onRemove(p),v.onRemove(function(){return t._onRemove.remove(p)});var d=t.args.bindTo(function(e,t,n,r){"_id"!==t&&(r&&delete v.subArgs[t],v.subArgs[t]=e)}),y=v.args.bindTo(function(e,n,r,o,i){"_id"!==n&&"value"!==n&&"___"!==n.substring(0,3)&&(o&&delete t.args[n],n in t.args&&(t.args[n]=e))});for(v.onRemove(d),v.onRemove(y),t.onRemove(d),t.onRemove(y);e.firstChild;)e.removeChild(e.firstChild);t.viewLists.set(e,v),v.render(e)});return this.onRemove(v),e}},{key:"mapIfTag",value:function(t){var n=this,r=t,o=t.getAttribute("cv-view"),i=r.getAttribute("cv-if"),a=r.getAttribute("cv-is"),u=!1,s=!1;r.removeAttribute("cv-view"),r.removeAttribute("cv-if"),r.removeAttribute("cv-is");var c=o?this.stringToClass(o):l;"!"===i.substr(0,1)&&(i=i.substr(1),u=!0),"?"===i.substr(0,1)&&(i=i.substr(1),s=!0);var f=new DocumentFragment;Array.from(r.childNodes).map(function(e){return f.appendChild(e)});var v=this,d=new DocumentFragment,y=new c(this.args,v);this.onRemove(y.tags.bindTo(function(e,t){n.tags[t]=e})),y.template=f;var h=v.args,b=i;if(i.match(/\./)){var m=p(e.Bindable.resolve(v.args,i,!0),2);h=m[0],b=m[1]}y.render(d);var g=h.bindTo(b,function(e,n){var r=e;s&&(e=null!=e),Array.isArray(e)&&(e=!!e.length),u&&(e=!e),e?(null!==a&&r==a||null===a)&&t.appendChild(d):y.nodes.map(function(e){return d.appendChild(e)})},{wait:0,children:Array.isArray(h[b])});v.onRemove(g);var w=function(){h.isBound()||e.Bindable.clearBindings(h)};return v.onRemove(function(){g(),w(),v._onRemove.remove(g),v._onRemove.remove(w)}),this.onRemove(function(){y.remove(),v!==n&&v.remove()}),t}},{key:"compileIfTag",value:function(t){var n=t.getAttribute("cv-if"),r=!1;t.removeAttribute("cv-if"),"!"===n.substr(0,1)&&(n=n.substr(1),r=!0);var o=new DocumentFragment;return Array.from(t.childNodes).map(function(e){return o.appendChild(e.cloneNode(!0))}),function(i){var a=t.cloneNode(),u=new DocumentFragment,s=new l({},i);s.template=o,i.syncBind(s);var c=i.args,f=n;if(n.match(/\./)){var v=p(e.Bindable.resolve(i.args,n,!0),2);c=v[0],f=v[1]}var d=!1,y=c.bindTo(f,function(e,t){if(!d){var n=i.args[f]||r?a:u;return s.render(n),void(d=!0)}Array.isArray(e)&&(e=!!e.length),r&&(e=!e),e?a.appendChild(u):s.nodes.map(function(e){return u.appendChild(e)})});i.onRemove(y);var h=function(){c.isBound()||e.Bindable.clearBindings(c)};return s.onRemove(function(){y(),h(),i._onRemove.remove(y),i._onRemove.remove(h)}),a}}},{key:"mapTemplateTag",value:function(e){var t=e.getAttribute("cv-template");return e.removeAttribute("cv-template"),this.templates[t]=function(){return"TEMPLATE"===e.tagName?e.content.cloneNode(!0):new DocumentFragment(e.innerHTML)},this.rendered.then(function(){return e.remove()}),e}},{key:"mapSlotTag",value:function(e){var t=e.getAttribute("cv-slot"),n=this.templates[t];if(!n){for(var r=this;r&&!(n=r.templates[t]);)r=this.parent;if(!n)return void console.error("Template ".concat(t," not found."))}var o=n();for(e.removeAttribute("cv-slot");e.firstChild;)e.firstChild.remove();return e.appendChild(o),e}},{key:"syncBind",value:function(e){var t=this,n=this.args.bindTo(function(t,n,r,o){"_id"!==n&&e.args[n]!==t&&(e.args[n]=t)}),r=e.args.bindTo(function(e,n,r,o,i){if("_id"!==n){var a=e,u=i;a instanceof l&&(a=a.___ref___),u instanceof l&&(u=u.___ref___),a!==u&&u instanceof l&&i.remove(),n in t.args&&(t.args[n]=e)}});this.onRemove(n),this.onRemove(r),e.onRemove(function(){t._onRemove.remove(n),t._onRemove.remove(r)})}},{key:"postRender",value:function(e){}},{key:"attached",value:function(e){}},{key:"interpolatable",value:function(e){return!!String(e).match(this.interpolateRegex)}},{key:"uuid",value:function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)})}},{key:"remove",value:function(){var e=this,t=function(){for(var t in e.tags)Array.isArray(e.tags[t])?(e.tags[t]&&e.tags[t].map(function(e){return e.remove()}),e.tags[t].splice(0)):(e.tags[t]&&e.tags[t].remove(),e.tags[t]=void 0);for(var n in e.nodes)e.nodes[n]&&e.nodes[n].dispatchEvent(new Event("cvDomDetached")),e.nodes[n]&&e.nodes[n].remove(),e.nodes[n]=void 0;e.nodes.splice(0),e.firstNode=e.lastNode=void 0};arguments.length>0&&void 0!==arguments[0]&&arguments[0]?t():requestAnimationFrame(t);var n,r,o=d(this._onRemove.items());try{for(o.s();!(n=o.n()).done;){var i=n.value;this._onRemove.remove(i),i()}}catch(e){o.e(e)}finally{o.f()}for(;r=this.cleanup.shift();)r&&r();var a,u=d(this.viewLists);try{for(u.s();!(a=u.n()).done;){var s=p(a.value,2);(s[0],s[1]).remove()}}catch(e){u.e(e)}finally{u.f()}this.viewLists.clear();var c,l=d(this.timeouts);try{for(l.s();!(c=l.n()).done;){var f=p(c.value,2),v=(f[0],f[1]);clearTimeout(v.timeout),this.timeouts.delete(v.timeout)}}catch(e){l.e(e)}finally{l.f()}for(var y in this.intervals)clearInterval(this.intervals[y].timeout),delete this.intervals[y];for(var y in this.frames)this.frames[y](),delete this.frames[y];this.removed=!0}},{key:"findTag",value:function(e){for(var t in this.nodes){var n;if(this.nodes[t].querySelector){if(this.nodes[t].matches(e))return new a.Tag(this.nodes[t],this,void 0,void 0,this);if(n=this.nodes[t].querySelector(e))return new a.Tag(n,this,void 0,void 0,this)}}}},{key:"findTags",value:function(e){var t=this;return this.nodes.filter(function(e){return e.querySelectorAll}).map(function(t){return v(t.querySelectorAll(e))}).flat().map(function(e){return new a.Tag(e,t,void 0,void 0,t)})}},{key:"onRemove",value:function(e){this._onRemove.add(e)}},{key:"update",value:function(){}},{key:"beforeUpdate",value:function(e){}},{key:"afterUpdate",value:function(e){}},{key:"stringTransformer",value:function(e){var t=this;return function(n){for(var r in e){for(var o=t,i=e[r];o&&!o[i];)o=o.parent;if(!o)return;n=o[e[r]](n)}return n}}},{key:"stringToClass",value:function(e){if(l.refClasses.has(e))return l.refClasses.get(e);var t=e.split("/"),r=t[t.length-1],o=n(e);return l.refClasses.set(e,o[r]),o[r]}},{key:"preventParsing",value:function(e){e[j]=!0}},{key:"toString",value:function(){return this.nodes.map(function(e){return e.outerHTML}).join(" ")}},{key:"listen",value:function(e,t,n,r){var o=this;if("string"==typeof e&&(r=n,n=t,t=e,e=this),e instanceof l)return this.listen(e.nodes,t,n,r);if(Array.isArray(e)){var i=e.map(function(e){return o.listen(e,t,n,r)});return function(){return i.map(function(e){return e()})}}if(e instanceof a.Tag)return this.listen(e.element,t,n,r);e.addEventListener(t,n,r);var u=function(){return e.removeEventListener(t,n,r)},s=function(){u(),u=function(){}};return this.onRemove(function(){return s()}),s}},{key:"detach",value:function(){for(var e in this.nodes)this.nodes[e].remove();return this.nodes}}],[{key:"isView",value:function(){return l}}]),l}(c.Mixin.with(l.EventTargetMixin));t.View=P,Object.defineProperty(P,"templates",{value:new Map}),Object.defineProperty(P,"refClasses",{value:new Map})}()}),require.register("curvature/base/ViewList.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ViewList=void 0;var e=n("./Bindable"),r=n("./View"),o=n("./Bag");function i(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,i=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw i}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=function(){function t(n,i,a,s){var c=this,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),this.removed=!1,this.args=e.Bindable.makeBindable({}),this.args.value=e.Bindable.makeBindable(a||{}),this.subArgs=e.Bindable.makeBindable({}),this.views=[],this.cleanup=[],this.viewClass=f||r.View,this._onRemove=new o.Bag,this.template=n,this.subProperty=i,this.keyProperty=l,this.tag=null,this.paused=!1,this.parent=s,this.rendered=new Promise(function(e,t){Object.defineProperty(c,"renderComplete",{configurable:!1,writable:!0,value:e})}),this.willReRender=!1,this.args.___before(function(e,t,n,r,o){"bindTo"!=t&&(c.paused=!0)}),this.args.___after(function(e,t,n,r,o){"bindTo"!=t&&(c.paused=n.length>1,c.reRender())});var v=this.args.value.bindTo(function(e,t,n,r){if(!c.paused){var o=t;if("symbol"!==u(t))if(isNaN(t)&&(o="_"+t),r)for(var i in c.views[o]&&c.views[o].remove(),delete c.views[o],c.views)c.views[i].args[c.keyProperty]="string"!=typeof i?i:i.substr(1);else c.views[o]||c.willReRender?c.views[o]&&c.views[o].args&&(c.views[o].args[c.keyProperty]=t,c.views[o].args[c.subProperty]=e):(cancelAnimationFrame(c.willReRender),c.willReRender=requestAnimationFrame(function(){c.reRender()}))}});this._onRemove.add(v)}var n,a;return n=t,(a=[{key:"render",value:function(e){var t,n=this,r=[],o=i(this.views);try{var a=function(){var n=t.value;n.render(e),r.push(n.rendered.then(function(){return n}))};for(o.s();!(t=o.n()).done;)a()}catch(e){o.e(e)}finally{o.f()}this.tag=e,Promise.all(r).then(function(e){return n.renderComplete(e)})}},{key:"reRender",value:function(){var e=this;if(!this.paused&&this.tag){var t=[];for(var n in this.views)t[n]=this.views[n];var r=[];this.upDebind&&this.upDebind.map(function(e){return e&&e()}),this.downDebind&&this.downDebind.map(function(e){return e&&e()}),this.upDebind=[],this.downDebind=[];var o=1/0,i=1/0,a=function(n){var a=!1,u=n;isNaN(u)?u="_"+n:String(u).length&&(u=Number(u));for(var s=t.length-1;s>=0;s--)if(t[s]&&void 0!==e.args.value[n]&&e.args.value[n]===t[s].args[e.subProperty]){a=!0,r[u]=t[s],isNaN(u)||(o=Math.min(o,u),u>0&&(i=Math.min(i,u))),r[u].args[e.keyProperty]=n,delete t[s];break}if(!a){var c={},l=r[u]=new e.viewClass(c,e.parent);isNaN(u)||(o=Math.min(o,u),u>0&&(i=Math.min(i,u))),r[u].template=(e.template,e.template),r[u].viewList=e,r[u].args[e.keyProperty]=n,r[u].args[e.subProperty]=e.args.value[n],e.upDebind[u]=c.bindTo(e.subProperty,function(t,n,r,o){var i=c[e.keyProperty];o?delete e.args.value[i]:e.args.value[i]=t}),e.downDebind[u]=e.subArgs.bindTo(function(e,t,n,r){r?delete c[t]:c[t]=e}),l.onRemove(function(){e.upDebind[u]&&e.upDebind[u](),e.downDebind[u]&&e.downDebind[u](),delete e.downDebind[u],delete e.upDebind[u]}),e._onRemove.add(function(){e.upDebind.filter(function(e){return e}).map(function(e){return e()}),e.upDebind.splice(0)}),e._onRemove.add(function(){e.downDebind.filter(function(e){return e}).map(function(e){return e()}),e.downDebind.splice(0)}),c[e.subProperty]=e.args.value[n]}};for(var u in this.args.value)a(u);for(var s in t){var c=!1;for(var l in r)if(t[s]===r[l]){c=!0;break}c||t[s].remove()}if(Array.isArray(this.args.value)){var f=0===o&&void 0!==r[1]&&r.length>1||i===1/0?o:i;this.rendered=function t(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=r.length-n-1;o>f&&void 0===r[o];)o--;return o<f?Promise.resolve():r[o]===e.views[o]?r[o].firstNode?t(Number(n)+1):(r[o].render(e.tag,r[o+1]),r[o].rendered.then(function(){return t(Number(n)+1)})):(r[o].render(e.tag,r[o+1]),e.views.splice(o,0,r[o]),r[o].rendered.then(function(){return t(Number(n)+1)}))}()}else{var v=[],p=Object.assign({},r),d=function(t){if(delete p[t],r[t].firstNode&&r[t]===e.views[t])return"continue";r[t].render(e.tag),v.push(r[t].rendered.then(function(){return r[t]}))};for(var y in r)d(y);for(var h in p)delete this.args.views[h],p.remove();this.rendered=Promise.all(v)}for(var b in this.views=r,r)isNaN(b)?r[b].args[this.keyProperty]=b.substr(1):r[b].args[this.keyProperty]=b;this.willReRender=!1}}},{key:"pause",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];for(var t in this.views)this.views[t].pause(e)}},{key:"onRemove",value:function(e){this._onRemove.add(e)}},{key:"remove",value:function(){for(var t in this.views)this.views[t].remove();var n=this._onRemove.items();for(var r in n)this._onRemove.remove(n[r]),n[r]();for(;this.cleanup.length;)this.cleanup.pop()();for(this.views=[];this.tag&&this.tag.firstChild;)this.tag.removeChild(this.tag.firstChild);this.subArgs&&e.Bindable.clearBindings(this.subArgs),e.Bindable.clearBindings(this.args),this.args.value&&!this.args.value.isBound()&&e.Bindable.clearBindings(this.args.value),this.removed=!0}}])&&s(n.prototype,a),t}();t.ViewList=c}()}),require.register("curvature/mixin/EventTargetMixin.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventTargetMixin=void 0;var e,r=n("../base/Mixin");function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=Symbol("Target"),a=(o(e={},r.Mixin.Constructor,function(){try{this[i]=new EventTarget}catch(e){this[i]=document.createDocumentFragment()}}),o(e,"dispatchEvent",function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=n[0];(e=this[i]).dispatchEvent.apply(e,n);var a="on".concat(o.type[0].toUpperCase()+o.type.slice(1));return"function"==typeof this[a]&&this[a](o),o.returnValue}),o(e,"addEventListener",function(){var e;(e=this[i]).addEventListener.apply(e,arguments)}),o(e,"removeEventListener",function(){var e;(e=this[i]).removeEventListener.apply(e,arguments)}),e);t.EventTargetMixin=a}()}),require.register("curvature/mixin/PromiseMixin.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseMixin=void 0;var e,r=n("../base/Mixin");function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=Symbol("Promise"),a=Symbol("Accept"),u=Symbol("Reject"),s=(o(e={},r.Mixin.Constructor,function(){var e=this;this[i]=new Promise(function(t,n){e[a]=t,e[u]=n})}),o(e,"then",function(){var e;return(e=this[i]).then.apply(e,arguments)}),o(e,"catch",function(){var e;return(e=this[i]).catch.apply(e,arguments)}),o(e,"finally",function(){var e;return(e=this[i]).finally.apply(e,arguments)}),e);t.PromiseMixin=s,Object.defineProperty(s,"Reject",{value:u}),Object.defineProperty(s,"Accept",{value:a})}()}),require.register("curvature/model/Database.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Database=void 0;var e=n("../base/Bindable"),r=n("../base/Mixin"),o=n("../mixin/EventTargetMixin");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?f(e):t}(this,n)}}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=Symbol("BeforeWrite"),d=Symbol("AfterWrite"),y=Symbol("BeforeDelete"),h=Symbol("AfterDelete"),b=Symbol("BeforeInsert"),m=Symbol("AfterInsert"),g=Symbol("BeforeUpdate"),w=Symbol("AfterUpdate"),O=Symbol("BeforeRead"),_=Symbol("AfterRead"),j=Symbol("PrimaryKey"),k=Symbol("Connection"),S=Symbol("Instances"),P=(Symbol("HighWater"),Symbol("Metadata")),A=Symbol("Timers"),R=Symbol("Target"),T=(Symbol("Store"),Symbol("Each")),E=Symbol("Name"),M=Symbol("Bank"),C=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(u,t);var n,r,o,i=l(u);function u(e){var t;return function(e,t){if(!(e instanceof u))throw new TypeError("Cannot call a class as a function")}(this),t=i.call(this),Object.defineProperty(f(t),k,{value:e}),Object.defineProperty(f(t),E,{value:e.name}),Object.defineProperty(f(t),A,{value:{}}),Object.defineProperty(f(t),P,{value:{}}),Object.defineProperty(f(t),M,{value:{}}),t}return n=u,o=[{key:"open",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this[S][e]?Promise.resolve(this[S][e]):new Promise(function(r,o){var i=indexedDB.open(e,n);i.onerror=function(e){u.dispatchEvent(new CustomEvent("error",{detail:{database:t[E],error:e,store:void 0,type:"read",subType:"select"}})),o(e)},i.onsuccess=function(n){var o=new t(n.target.result);t[S][e]=o,r(o)},i.onupgradeneeded=function(r){var o=r.target.result;o.addEventListener("error",function(e){return console.error(e)});for(var i=new t(o),a=r.oldVersion+1;a<=n;a+=1)i["_version_"+a](o);t[S][e]=i}})}},{key:"getPrimaryKey",value:function(e){return e[j]?e[j].description:null}},{key:"destroyDatabase",value:function(){var e=this;return new Promise(function(t,n){var r=indexedDB.delete(dbName);r.onerror=function(e){u.dispatchEvent(new CustomEvent("error",{detail:{database:dbName,error:e,type:"destroy"}})),n(e)},r.onsuccess=function(n){delete e[S][dbName],t(dbName)}})}}],(r=[{key:"select",value:function(e){var t=this,n=e.store,r=e.index,o=e.range,i=void 0===o?null:o,a=e.direction,u=void 0===a?"next":a,s=e.limit,c=void 0===s?0:s,l=e.offset,f=void 0===l?0:l,v=e.type,p=void 0!==v&&v,d=e.origin,y=void 0===d?void 0:d,h=this[k].transaction(n,"readonly").objectStore(n),b=r?h.index(r):h;return{each:this[T](p,b,u,i,c,f,y),one:this[T](p,b,u,i,1,f,y),then:function(e){return t[T](p,b,u,i,c,f,y)(function(e){return e}).then(e)}}}},{key:"insert",value:function(t,n){var r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise(function(i,a){r[M][t]=r[M][t]||{};var s=r[k].transaction([t],"readwrite"),c=s.objectStore(t),l=r[M][t];n=e.Bindable.make(n);var f={database:r[E],record:n,store:t,type:"write",subType:"insert",origin:o},v=n[u.BeforeWrite]?n[u.BeforeWrite](f):null,p=n[u.BeforeInsert]?n[u.BeforeInsert](f):null,d=c.add(Object.assign({},e.Bindable.shuck(n)));!1!==v&&!1!==p&&(d.onerror=function(e){r.dispatchEvent(new CustomEvent("writeError",{detail:f})),a(e)},d.onsuccess=function(e){var a=e.target.result;if(l[a]=n,f.key=u.getPrimaryKey(n),r.dispatchEvent(new CustomEvent("write",{cancelable:!0,detail:f}))){if(n[j]=Symbol.for(a),r[P][t]||(r[P][t]=r.getStoreMeta(t,"store",{})),r[P][t]){var c=r.checkHighWaterMark(t,n),v=r.checkLowWaterMark(t,n),p=r[P][t],d=n[p.highWater];o.setHighWater&&c<d&&r.setHighWaterMark(t,n,o,"insert"),o.setLowWater&&v>d&&r.setLowWaterMark(t,n,o,"insert")}s.commit&&s.commit(),n[u.AfterInsert]&&n[u.AfterInsert](f),n[u.AfterWrite]&&n[u.AfterWrite](f)}else s.abort();i(n)})})}},{key:"update",value:function(t,n){var r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!n[j])throw Error("Value provided is not a DB record!");return new Promise(function(i,a){var s=r[k].transaction([t],"readwrite"),c=s.objectStore(t),l={database:r[E],key:u.getPrimaryKey(n),record:n,store:t,type:"write",subType:"update",origin:o};n[u.AfterInsert]&&n[u.AfterInsert](l),n[u.AfterWrite]&&n[u.AfterWrite](l);var f=n[u.BeforeWrite]?n[u.BeforeWrite](l):null,v=n[u.BeforeUpdate]?n[u.BeforeUpdate](l):null;if(!1!==f&&!1!==v){var p=c.put(Object.assign({},e.Bindable.shuck(n)));p.onerror=function(e){r.dispatchEvent(new CustomEvent("writeError",{detail:l})),a(e)},p.onsuccess=function(e){if(r.dispatchEvent(new CustomEvent("write",{cancelable:!0,detail:l}))){if(r[P][t]||(r[P][t]=r.getStoreMeta(t,"store",{})),r[P][t]){var a=r.checkHighWaterMark(t,n),u=r.checkLowWaterMark(t,n),c=r[P][t],f=n[c.highWater];o.setHighWater&&a<f&&r.setHighWaterMark(t,n,o,"insert"),o.setLowWater&&u>f&&r.setLowWaterMark(t,n,o,"insert")}s.commit&&s.commit()}else s.abort();i(e)}}})}},{key:"delete",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if(!t[j])throw Error("Value provided is not a DB record!");return new Promise(function(o,i){var a=n[k].transaction([e],"readwrite"),s=a.objectStore(e),c={database:n[E],record:t,key:u.getPrimaryKey(t),store:e,type:"write",subType:"delete",origin:r};if(!1!==(t[u.BeforeDelete]?t[u.BeforeDelete](c):null)){var l=s.delete(Number(t[j].description));t[j]=void 0,t[u.AfterDelete]&&t[u.AfterDelete](c),l.onerror=function(e){c.original=e;var t=new CustomEvent("writeError",{detail:c});n.dispatchEvent(t),i(e)},l.onsuccess=function(e){c.original=e;var t=new CustomEvent("write",{detail:c});n.dispatchEvent(t),a.commit&&a.commit(),o(t)}}})}},{key:"clear",value:function(e){var t=this;return new Promise(function(n,r){var o=t[k].transaction([e],"readwrite"),i=o.objectStore(e).clear(),a={database:t[E],store:e,type:"write",subType:"clear",origin:origin};i.onerror=function(e){a.original=e;var n=new CustomEvent("writeError",{detail:a});t.dispatchEvent(n),r(e)},i.onsuccess=function(e){a.original=e;var r=new CustomEvent("write",{detail:a});t.dispatchEvent(r),o.commit&&o.commit(),n(r)}})}},{key:"listStores",value:function(){return a(this[k].objectStoreNames)}},{key:"listIndexes",value:function(e){return a(this[k].transaction([e]).objectStore(e).indexNames)}},{key:T,value:function(t,n,r,o,i,a,s){var c=this;return function(l){return new Promise(function(f,v){var p=0;n.openCursor(o,r).addEventListener("success",function(r){var o=r.target.result;if(!o)return f({record:null,result:null,index:p});c[M][w]=c[M][w]||{};var v=c[M][w],d=o.primaryKey,y=t?t.from(o.value):o.value,h=e.Bindable.makeBindable(y),b={database:c[E],key:u.getPrimaryKey(h),record:y,store:n.name,type:"read",subType:"select",origin:s},m=y[u.BeforeRead]?y[u.BeforeRead](b):null;if(a>p++||!1===m)return o.continue();v[d]?Object.assign(v[d],y):(y[j]=Symbol.for(d),v[d]=y);var g=o.source,w=g.objectStore?g.objectStore.name:n.name;if(v[d][u.AfterRead]&&v[d][u.AfterRead](b),b.record=y,c.dispatchEvent(new CustomEvent("read",{detail:b,cancelable:!0}))){var O=t?t.from(v[d]):v[d];O[j]=Symbol.for(d);var _=l?l(O,p):O;if(i&&p-a>=i)return a+=i,f({record:O,result:_,index:p})}o.continue()})})}}},{key:"setStoreMeta",value:function(e,t,n){localStorage.setItem("::::cvdb::".concat(e,"::").concat(t),JSON.stringify(n))}},{key:"getStoreMeta",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=localStorage.getItem("::::cvdb::".concat(e,"::").concat(t)),o=null!==r?JSON.parse(r):n;return null===o?n:o}},{key:"createObjectStore",value:function(e,t){var n=this[k].createObjectStore(e,t);return this.setStoreMeta(e,"store",t),n}},{key:"deleteObjectStore",value:function(e){return this[k].deleteObjectStore(e)}},{key:"checkHighWaterMark",value:function(e,t){return this.getStoreMeta(e,"highWater",0)}},{key:"setHighWaterMark",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,o=t[this[P][e].highWater],i=this.getStoreMeta(e,"highWater",0);this.setStoreMeta(e,"highWater",o),this.dispatchEvent(new CustomEvent("highWaterMoved",{detail:{database:this[E],record:t,store:e,type:"highWaterMoved",subType:r,origin:n,oldValue:i,value:o}}))}},{key:"checkLowWaterMark",value:function(e,t){return this.getStoreMeta(e,"lowWater",1/0)}},{key:"setLowWaterMark",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,o=t[this[P][e].highWater],i=this.getStoreMeta(e,"lowWater",null);this.setStoreMeta(e,"lowWater",o),this.dispatchEvent(new CustomEvent("lowWaterMoved",{detail:{database:this[E],record:t,store:e,type:"lowWaterMoved",subType:r,origin:n,oldValue:i,value:o}}))}}])&&s(n.prototype,r),o&&s(n,o),u}(r.Mixin.with(o.EventTargetMixin));t.Database=C,Object.defineProperty(C,S,{value:[]}),Object.defineProperty(C,R,{value:document.createDocumentFragment()}),Object.defineProperty(C,"BeforeDelete",{value:y}),Object.defineProperty(C,"AfterDelete",{value:h}),Object.defineProperty(C,"BeforeWrite",{value:p}),Object.defineProperty(C,"AfterWrite",{value:d}),Object.defineProperty(C,"BeforeInsert",{value:b}),Object.defineProperty(C,"AfterInsert",{value:m}),Object.defineProperty(C,"BeforeUpdate",{value:g}),Object.defineProperty(C,"AfterUpdate",{value:w}),Object.defineProperty(C,"BeforeRead",{value:O}),Object.defineProperty(C,"AfterRead",{value:_});var x=function(e){Object.defineProperty(C,e,{value:function(){var t;return(t=C[R])[e].apply(t,arguments)}})};for(var B in["addEventListener","removeEventListener","dispatchEvent"])x(B)}()}),require.register("curvature/model/Model.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Model=void 0;var e=n("../base/Cache"),r=n("../base/Bindable");function o(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,a=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw a}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}var c=Symbol("Saved"),l=Symbol("Changed"),f=function(){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Object.defineProperty(this,l,{value:r.Bindable.make({})}),Object.defineProperty(this,c,{writable:!0,value:!1}),r.Bindable.makeBindable(this)}return s(t,null,[{key:"keyProps",get:function(){return["id","class"]}}]),s(t,[{key:"consume",value:function(n){var r=this,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=t.keyProps,u=function(t,n){if(n&&"object"===a(n)&&n.constructor.keyProps){var o=n.constructor.keyProps.map(function(e){return n[e]}).join("::"),i=e.Cache.load(o,!1,"models-by-type-and-publicId");i&&(i.consume(n),n=i)}r[t]=n};for(var s in n)!o&&this[l][s]||i.includes(s)||u(s,n[s])}},{key:"changed",value:function(){this[c]=!1}},{key:"stored",value:function(){for(var e in this[l])this[l][e]=!1;this[c]=!0}},{key:"isSaved",value:function(){return this[c]}}],[{key:"from",value:function(t){var n,r=this,i=this.keyProps,u=i.map(function(e){return t[e]}).join("::"),s="models-by-type-and-publicId",f=e.Cache.load(u,!1,s),v=f||new this,p=o(i);try{for(p.s();!(n=p.n()).done;){var d,y,h=n.value;v[h]=null!==(d=null!==(y=v[h])&&void 0!==y?y:t[h])&&void 0!==d?d:null}}catch(e){p.e(e)}finally{p.f()}if(v.consume(t),e.Cache.store(u,v,0,s),!f){var b=!1;v.bindTo(function(e,t,n){"symbol"!==a(t)&&e!==n[t]&&(v[l][t]=b,v[c]=!(b||!r[c]))}),b=!0}return v}}]),t}();t.Model=f,Object.defineProperty(f,"Saved",{value:c}),Object.defineProperty(f,"Changed",{value:l})}()}),require.register("FeedView.js",function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.FeedView=void 0,t("curvature/base/Bindable");var o=t("curvature/base/View"),i=(t("curvature/model/Model"),t("./MessageView")),a=t("./MessageModel"),u=t("./MessageLinkView"),s=t("./MessageImageView"),c=t("./MessageAudioView"),l=t("./MessageVideoView"),f=t("./MessageYoutubeView"),v=(t("./UserModel"),t("./UserDatabase"),t("./Github"));function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,t)||y(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=y(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function y(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?w(e):t}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(y,e);var n,r,o=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=O(e);if(t){var o=O(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g(this,n)}}(y);function y(e){var n;return function(e,t){if(!(e instanceof y))throw new TypeError("Cannot call a class as a function")}(this),_(w(n=o.call(this,e)),"template",t("feed.html")),_(w(n),"postSet",new Set),n.args.posts=n.args.posts||[],n}return n=y,(r=[{key:"loadFeeds",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/feeds.list";fetch(t).then(function(e){return e.text()}).then(function(t){var n,r=d(t.split(/\n/));try{for(r.s();!(n=r.n()).done;){var o=n.value;o&&e.loadFeed(o)}}catch(e){r.e(e)}finally{r.f()}})}},{key:"loadFeed",value:function(e){var t=this;fetch("/"+e).then(function(e){return e.text()}).then(function(e){var n,r=d(e.split(/\n/));try{for(r.s();!(n=r.n()).done;){var o=n.value;if(o){var i=p(o.split(/\s/),2),a=(i[0],i[1]);t.loadMessage(a)}}}catch(e){r.e(e)}finally{r.f()}})}},{key:"loadMessage",value:function(e){var t=this;fetch("/messages/"+e+".smsg").then(function(e){return e.arrayBuffer()}).then(function(e){return a.MessageModel.fromBytes(e)}).then(function(e){return t.displayPost(e)})}},{key:"displayPost",value:function(e){if(e&&e.url&&!this.postSet.has(e.url)){var t=e.header.mime.split(/[\/\s]/);switch("text"===t[0]?e.name.split(".").pop():t[0]){case"image":this.args.posts.push(new s.MessageImageView(e));break;case"video":this.args.posts.push(new l.MessageVideoView(e));break;case"audio":this.args.posts.push(new c.MessageAudioView(e));break;case"url":var n=new URL(e.body);switch(n.host){case"youtube.com":case"www.youtube.com":e.videoStart=parseInt(n.searchParams.get("t"))||0,e.videoCode=n.searchParams.get("v"),this.args.posts.push(new f.MessageYoutubeView(e));break;default:this.args.posts.push(new u.MessageLinkView(e))}break;default:this.args.posts.push(new i.MessageView(e))}this.postSet.add(e.url)}}},{key:"createPost",value:function(e){var t=this;if(e.preventDefault(),this.args.inputPost){var n="messages/post-".concat(Date.now(),".md"),r=new v.Github("seanmorris/sycamore").put({data:this.args.inputPost+"\n",location:n,message:"Sycamore self-edit.",branch:"master",sha:""});return r.then(function(){return t.args.inputPost=""}),r}}}])&&b(n.prototype,r),y}(o.View);e.FeedView=j}),require.register("Github.js",function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.Github=void 0;var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.repository=t}var t,n;return t=e,(n=[{key:"getToken",value:function(){var e=sessionStorage.getItem("sycamore::github-token");if(e)return JSON.parse(e)}},{key:"setToken",value:function(e){return sessionStorage.setItem("sycamore::github-token",e)}},{key:"get",value:function(e){return fetch("https://api.github.com/repos/"+this.repository+"/contents/"+e,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/vnd.github.v3.json"},mode:"cors"}).then(function(e){return e.json()})}},{key:"put",value:function(e){var t=e.data,n=e.location,r=e.message,o=void 0===r?"Sycamore self-edit.":r,i=(e.branch,e.sha),a=void 0===i?"":i,u={message:o,content:btoa(unescape(encodeURIComponent(t))),sha:a},s={"Content-Type":"application/json",Accept:"application/vnd.github.v3.json"},c=this.getToken(),l=JSON.stringify(u);return console.log(c),c&&c.access_token?(s.Authorization="token ".concat(c.access_token),fetch("https://api.github.com/repos/"+this.repository+"/contents/"+n,{method:"PUT",headers:s,body:l,mode:"cors"}).then(function(e){return e.json()})):Promise.reject("No access token found.")}}])&&r(t.prototype,n),e}();e.Github=o}),require.register("MessageAudioView.js",function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?a(e):t}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.MessageAudioView=void 0,t("curvature/base/View");var s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(r,t("./MessageView").MessageView);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return i(this,n)}}(r);function r(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);for(var o=arguments.length,i=new Array(o),u=0;u<o;u++)i[u]=arguments[u];return function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(a(e=n.call.apply(n,[this].concat(i))),"template",t("./message-audio.html")),e}return r}();e.MessageAudioView=s}),require.register("MessageDatabase.js",function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.MessageDatabase=void 0;var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(u,e);var t,n,r=a(u);function u(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),r.apply(this,arguments)}return t=u,(n=[{key:"_version_1",value:function(e){var t=this.createObjectStore("messages",{keyPath:"url",unique:!0});t.createIndex("authority","header.authority",{unique:!1}),t.createIndex("issued","header.issued",{unique:!1}),t.createIndex("name","header.name",{unique:!1}),t.createIndex("url","url",{unique:!0})}}])&&o(t.prototype,n),u}(t("curvature/model/Database").Database);e.MessageDatabase=c}),require.register("MessageImageView.js",function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?a(e):t}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.MessageImageView=void 0,t("curvature/base/View");var s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(r,t("./MessageView").MessageView);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return i(this,n)}}(r);function r(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);for(var o=arguments.length,i=new Array(o),u=0;u<o;u++)i[u]=arguments[u];return function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(a(e=n.call.apply(n,[this].concat(i))),"template",t("./message-image.html")),e}return r}();e.MessageImageView=s}),require.register("MessageLinkView.js",function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?a(e):t}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.MessageLinkView=void 0,t("curvature/base/View");var s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(r,t("./MessageView").MessageView);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return i(this,n)}}(r);function r(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);for(var o=arguments.length,i=new Array(o),u=0;u<o;u++)i[u]=arguments[u];return function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(a(e=n.call.apply(n,[this].concat(i))),"template",t("./message-link.html")),e}return r}();e.MessageLinkView=s}),require.register("MessageModel.js",function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.MessageModel=void 0;var o=t("curvature/model/Model"),i=t("./MessageDatabase");function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(u,e);var t,n,r,o=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}(u);function u(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(f(e=o.call.apply(o,[this].concat(n))),"verified",null),p(f(e),"signature",void 0),p(f(e),"segments",void 0),p(f(e),"header",void 0),p(f(e),"body",void 0),p(f(e),"url",void 0),p(f(e),"id",void 0),e}return t=u,r=[{key:"keyProps",get:function(){return["url","class"]}},{key:"fromSkeleton",value:function(e){}},{key:"fromUrl",value:function(e){var t=this;return fetch(e).then(function(e){return e.arrayBuffer()}).then(function(e){return t.fromBytes(e)})}},{key:"fromString",value:function(e){var t=this;return new Blob([e],{type:"text/plain; charset=utf-8"}).arrayBuffer().then(function(e){return t.fromBytes(e)})}},{key:"fromBytes",value:function(e){var t=[i.MessageDatabase.open("messages",1),this.parseBytes(e)];return Promise.all(t).then(function(e){var t=a(e,2),n=t[0],r=t[1],o={store:"messages",index:"url",range:r.url,type:u};return n.select(o).one().then(function(e){var t=e.record;return t?r.issued>t.issued&&(t.consume(r),n.update("messages",t)):n.insert("messages",r),setTimeout(function(){return r.verify()},1500*Math.random()),r})})}},{key:"parseBytes",value:function(e){var t=this,n=new Uint32Array(e.slice(0,4))[0];if(2173542384!==n)return Promise.reject("Invalid preamble: "+n);var r=new Uint32Array(e.slice(5,9))[0],o=e.slice(10,10+r),i=10+r;return new Blob([o],{type:"text/plain; charset=utf-8"}).text().then(function(t){var n=JSON.parse(t),r=new Uint32Array(e.slice(i,i+4))[0],a=e.slice(i+5,i+r+5),u=new Blob([a],{type:n.mime||"text/plain; charset=utf-8"}),s=i+r+5,c=new Uint32Array(e.slice(s,s+4))[0],l=e.slice(s+5,s+c+5),f=l.slice(30,-29),v=new Blob([f],{type:"text/plain; charset=utf-8"}),p=new Blob([l],{type:"text/plain; charset=utf-8"});return v.text().then(function(t){return fetch("data:application/sycamore;base64,"+t).then(function(e){return e.arrayBuffer()}).then(function(t){var r={signature:t,message:e.slice(0,s),header:o,body:a},i="text"===n.mime.substr(0,4)?u.text():URL.createObjectURL(u),c=[n,i,p.text(),r];return Promise.all(c)})})}).then(function(n){var r=a(n,4),o=r[0],i=r[1],u=r[2],s=r[3],c=o.authority+"/"+o.name,l={header:o,body:i,buffer:e,signature:u,url:c,segments:s},f=new t;return f.consume(l),f})}}],(n=[{key:"authority",get:function(){return this.header&&this.header.authority}},{key:"issued",get:function(){return this.header&&this.header.issued}},{key:"name",get:function(){return this.header&&this.header.name}},{key:"verify",value:function(){var e=this;return fetch(this.header.key).then(function(e){return e.text()}).then(function(e){return e.replace(/-----[\w\s]+-----/g,"").trim()}).then(function(e){return fetch("data:text/plain;base64,"+e).then(function(e){return e.arrayBuffer()})}).then(function(e){return crypto.subtle.importKey("spki",e,{name:"RSASSA-PKCS1-v1_5",hash:"SHA-1"},!0,["verify"])}).then(function(t){return crypto.subtle.verify("RSASSA-PKCS1-v1_5",t,e.segments.signature,e.segments.message)}).then(function(t){return e.verified=t})}}])&&s(t.prototype,n),r&&s(t,r),u}(o.Model);e.MessageModel=d}),require.register("MessageVideoView.js",function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?a(e):t}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.MessageVideoView=void 0,t("curvature/base/View");var s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(r,t("./MessageView").MessageView);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return i(this,n)}}(r);function r(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);for(var o=arguments.length,i=new Array(o),u=0;u<o;u++)i[u]=arguments[u];return function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(a(e=n.call.apply(n,[this].concat(i))),"template",t("./message-video.html")),e}return r}();e.MessageVideoView=s}),require.register("MessageView.js",function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.MessageView=void 0;var o=t("curvature/base/View");function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}t("curvature/base/Tag");var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(s,e);var n,r,o=u(s);function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(c(e=o.call.apply(o,[this].concat(r))),"template",t("./message.html")),e}return n=s,(r=[{key:"formatTime",value:function(e){return new Date(1e3*e)}},{key:"verifiedClass",value:function(e){return!0===e?"verified":!1===e?"verify-failed":null===e?"verify-pending":void 0}}])&&i(n.prototype,r),s}(o.View);e.MessageView=f}),require.register("MessageYoutubeView.js",function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?a(e):t}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.MessageYoutubeView=void 0,t("curvature/base/View");var s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(r,t("./MessageView").MessageView);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return i(this,n)}}(r);function r(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);for(var o=arguments.length,i=new Array(o),u=0;u<o;u++)i[u]=arguments[u];return function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(a(e=n.call.apply(n,[this].concat(i))),"template",t("./message-youtube.html")),e}return r}();e.MessageYoutubeView=s}),require.register("RootView.js",function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.RootView=void 0;var o=t("curvature/base/View"),i=t("./UserList");function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(c,e);var n,r,o=s(c);function c(e){var n,r,i,a;return function(e,t){if(!(e instanceof c))throw new TypeError("Cannot call a class as a function")}(this),r=l(n=o.call(this,e)),i="template",a=t("./root.html"),i in r?Object.defineProperty(r,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[i]=a,n.args.profileName="Sycamore",n.args.profileTheme="maple-tree",n}return n=c,(r=[{key:"githubLoginClicked",value:function(e){var t=Math.random().toString(36),n=window.open("https://github.com/login/oauth/authorize?redirect_uri=https://sycamore.seanmorr.is/github-auth/accept&client_id=4c8f4209d3c4ad741d2c&scope=public_repo&state="+t,"github-login","left=100,top=100,width=750,height=500,resizable=0,scrollbars=0,location=0,menubar=0,toolbar=0,status=0");globalThis.loginChecker=setInterval(100,function(){n.closed&&(clearInterval(globalThis.loginChecker),accept())}),window.addEventListener("message",function(e){var t=JSON.parse(e.data);t&&t.access_token?sessionStorage.setItem("sycamore::github-token",JSON.stringify(t)):sessionStorage.setItem("sycamore::github-token","{}"),n.close()},!1)}},{key:"openSettings",value:function(){this.args.settings=this.args.settings?null:new i.UserList}}])&&a(n.prototype,r),c}(o.View);e.RootView=v}),require.register("UserDatabase.js",function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.UserDatabase=void 0;var o=t("curvature/model/Database"),i=t("./UserModel");function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(u,e);var t,n,r,o=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}(u);function u(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),o.apply(this,arguments)}return t=u,r=[{key:"syncUsers",value:function(){fetch("/syndicating.json").then(function(e){return e.json()}).then(function(e){return u.open("users",1).then(function(t){var n,r=a(e);try{var o=function(){var e=n.value,r={store:"users",index:"uid",range:e.uid,type:i.UserModel};t.select(r).one().then(function(n){if(n.record)n.record.consume(e),t.update("users",n.record);else{var r=i.UserModel.from(e);t.insert("users",r)}})};for(r.s();!(n=r.n()).done;)o()}catch(e){r.e(e)}finally{r.f()}})})}}],(n=[{key:"_version_1",value:function(e){var t=this.createObjectStore("users",{keyPath:"uid",unique:!0});t.createIndex("name","name",{unique:!1}),t.createIndex("url","url",{unique:!1}),t.createIndex("uid","uid",{unique:!0})}}])&&s(t.prototype,n),r&&s(t,r),u}(o.Database);e.UserDatabase=v}),require.register("UserList.js",function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.UserList=void 0;var o=t("curvature/base/View"),i=t("./UserModel"),a=t("./UserDatabase"),u=t("./Github");function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(f,e);var n,r,o=l(f);function f(e){var n,r,u,s;return function(e,t){if(!(e instanceof f))throw new TypeError("Cannot call a class as a function")}(this),r=v(n=o.call(this,e)),u="template",s=t("./user-list.html"),u in r?Object.defineProperty(r,u,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[u]=s,n.args.profiles=[],a.UserDatabase.open("users",1).then(function(e){var t={store:"users",index:"uid",type:i.UserModel};e.select(t).each(function(e){return n.args.profiles.push(e)})}),n}return n=f,(r=[{key:"removeMode",value:function(){this.args.removeMode=this.args.removeMode?null:"remove-mode"}},{key:"deleteUser",value:function(e,t,n){var r=this;if(t){a.UserDatabase.open("users",1).then(function(e){return e.delete("users",t)}),delete this.args.profiles[n];var o=new u.Github("seanmorris/sycamore");o.get("docs/syndicating.json").then(function(e){var t=r.args.profiles.filter(function(e){return e});return o.put({location:"docs/syndicating.json",data:JSON.stringify(t,null,4),sha:e.sha})})}}}])&&s(n.prototype,r),f}(o.View);e.UserList=d}),require.register("UserModel.js",function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(e,"__esModule",{value:!0}),e.UserModel=void 0;var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(u,e);var t,n,r=a(u);function u(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return l(s(e=r.call.apply(r,[this].concat(n))),"name",void 0),l(s(e),"about",void 0),l(s(e),"issued",void 0),l(s(e),"img",void 0),l(s(e),"uid",void 0),l(s(e),"url",void 0),l(s(e),"hub",void 0),l(s(e),"key",void 0),e}return t=u,n=[{key:"keyProps",get:function(){return["uid","class"]}}],null&&o(t.prototype,null),n&&o(t,n),u}(t("curvature/model/Model").Model);e.UserModel=f}),require.register("UserView.js",function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.UserView=void 0;var o=t("curvature/base/View"),i=t("./UserModel"),a=t("./UserDatabase");function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(r,o.View);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}(r);function r(e){var o,u,s,l;return function(e,t){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this),u=c(o=n.call(this,e)),s="template",l=t("./user.html"),s in u?Object.defineProperty(u,s,{value:l,enumerable:!0,configurable:!0,writable:!0}):u[s]=l,a.UserDatabase.open("users",1).then(function(t){var n={store:"users",index:"uid",range:e.uid,type:i.UserModel};t.select(n).one().then(function(e){e.result;var t=e.record;Object.assign(o.args,t)})}),o}return r}();e.UserView=f}),require.register("WarehouseConsole.js",function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.WarehouseConsole=void 0;var o=t("curvature/base/View"),i=t("./MessageModel"),a=t("./FeedView");function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(r,o.View);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}(r);function r(e){var o;!function(e,t){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this),f(c(o=n.call(this,e)),"template",t("./warehouse-console.html")),f(c(o),"stream",new EventSource("https://backend.warehouse.seanmorr.is/subscribe/sycamore.seanmorr.is::posts"));var u=o.args.feed=new a.FeedView;return o.listen(o.stream,"ServerEvent",function(e){try{var t=JSON.parse(e.data);fetch("data:application/sycamore;base64,"+t.payload).then(function(e){return e.arrayBuffer()}).then(function(e){return i.MessageModel.fromBytes(e)}).then(function(e){return u.displayPost(e)})}catch(e){console.log(e)}}),o}return r}();e.WarehouseConsole=v}),require.register("feed.html",function(e,t,n){n.exports='<section cv-if = "showForm">\n\n\t<form class = "post" cv-on = "submit:createPost(event)">\n\t\t<input type = "text" placeholder = "Write a post!" cv-bind = "inputPost" />\n\t\t<input type = "submit" />\n\t</form>\n\n</section>\n\n<ul class = "messages" cv-each = "posts:post">[[post]]</ul>\n'}),require.register("initialize.js",function(e,t,n){"use strict";var r=t("curvature/base/Router"),o=t("./RootView"),i=t("./FeedView"),a=t("./UserView"),u=(t("./UserModel"),t("./UserDatabase")),s=t("./MessageModel"),c=t("./WarehouseConsole");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){v(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=new o.RootView;u.UserDatabase.syncUsers();var d={"":function(e){var t=new i.FeedView(f(f({},e),{},{showForm:!0}));return t.loadFeeds(),t},"messages/%mid":function(e){var t=new i.FeedView(e);return s.MessageModel.fromUrl("/messages/"+e.mid+".smsg").then(function(e){t.displayPost(e)}),t},"user/%uid":function(e){return new a.UserView(e)},warehouse:function(e){return new c.WarehouseConsole(e)}};r.Router.listen(p,d),p.listen(document,"DOMContentLoaded",function(e){return p.render(document.body)},{once:!0})}),require.register("message-audio.html",function(e,t,n){n.exports='<li class = "[[verified|verifiedClass]]" data-type = "[[header.mime]]">\n\t<section class = "author">\n\t\t<div class = "avatar"></div>\n\t\t<span class = "author">\n\t\t\t<a cv-link = "user/[[uid]]">[[header.author]]</a>\n\t\t\t<div class = "verify icon"></div>\n\t\t</span>\n\t</section>\n\n\t<section>\n\t\t<small title = "[[issued]]">[[issued|formatTime]]</small>\n\t</section>\n\n\t<section>\n\t\t<span class = "body video">\n\t\t\t<audio controls src = "[[body]]">[[body]]</audio>\n\t\t</span>\n\t</section>\n\n\t<section class = "reaction-bar">\n\t\t<a cv-link>Reply</a>\n\t\t - <a cv-link>Like</a>\n\t\t - <a cv-link>Pay</a>\n\t\t - <a cv-link>Follow</a>\n\t</section>\n\n\t<section>\n\t\t<a cv-link = "/messages/[[name]]">\n\t\t\t[[name]]\n\t\t\t<img class = "icon" src = "/go.svg" />\n\t\t</a>\n\t</section>\n</li>\n'}),require.register("message-image.html",function(e,t,n){n.exports='<li class = "[[verified|verifiedClass]]" data-type = "[[header.mime]]">\n\t<section class = "author">\n\t\t<div class = "avatar"></div>\n\t\t<span class = "author">\n\t\t\t<a cv-link = "user/[[uid]]">[[header.author]]</a>\n\t\t\t<div class = "verify icon"></div>\n\t\t</span>\n\t</section>\n\n\t<section>\n\t\t<small title = "[[issued]]">[[issued|formatTime]]</small>\n\t</section>\n\n\t<section>\n\t\t<span class = "body image">\n\t\t\t<img src = "[[body]]">\n\t\t</span>\n\t</section>\n\n\t<section class = "reaction-bar">\n\t\t<a cv-link>Reply</a>\n\t\t - <a cv-link>Like</a>\n\t\t - <a cv-link>Pay</a>\n\t\t - <a cv-link>Follow</a>\n\t</section>\n\n\t<section>\n\t\t<a cv-link = "/messages/[[name]]">\n\t\t\t[[name]]\n\t\t\t<img class = "icon" src = "/go.svg" />\n\t\t</a>\n\t</section>\n</li>\n'}),require.register("message-link.html",function(e,t,n){n.exports='<li class = "[[verified|verifiedClass]]" data-type = "[[header.mime]]">\n\t<section class = "author">\n\t\t<div class = "avatar"></div>\n\t\t<span class = "author">\n\t\t\t<a cv-link = "user/[[uid]]">[[header.author]]</a>\n\t\t\t<div class = "verify icon"></div>\n\t\t</span>\n\t</section>\n\n\t<section>\n\t\t<small title = "[[issued]]">[[issued|formatTime]]</small>\n\t</section>\n\n\t<section>\n\t\t<span class = "body text short"><a href = "[[body]]">[[body]]</a></span>\n\t</section>\n\n\t<section class = "reaction-bar">\n\t\t<a cv-link>Reply</a>\n\t\t - <a cv-link>Like</a>\n\t\t - <a cv-link>Pay</a>\n\t\t - <a cv-link>Follow</a>\n\t</section>\n\n\t<section>\n\t\t<a cv-link = "/messages/[[name]]">\n\t\t\t[[name]]\n\t\t\t<img class = "icon" src = "/go.svg" />\n\t\t</a>\n\t</section>\n</li>\n'}),require.register("message-video.html",function(e,t,n){n.exports='<li class = "[[verified|verifiedClass]]" data-type = "[[header.mime]]">\n\t<section class = "author">\n\t\t<div class = "avatar"></div>\n\t\t<span class = "author">\n\t\t\t<a cv-link = "user/[[uid]]">[[header.author]]</a>\n\t\t\t<div class = "verify icon"></div>\n\t\t</span>\n\t</section>\n\n\t<section>\n\t\t<small title = "[[issued]]">[[issued|formatTime]]</small>\n\t</section>\n\n\t<section>\n\t\t<span class = "body video">\n\t\t\t<video controls loop src = "[[body]]">[[body]]</video>\n\t\t</span>\n\t</section>\n\n\t<section class = "reaction-bar">\n\t\t<a cv-link>Reply</a>\n\t\t - <a cv-link>Like</a>\n\t\t - <a cv-link>Pay</a>\n\t\t - <a cv-link>Follow</a>\n\t</section>\n\n\t<section>\n\t\t<a cv-link = "/messages/[[name]]">\n\t\t\t[[name]]\n\t\t\t<img class = "icon" src = "/go.svg" />\n\t\t</a>\n\t</section>\n</li>\n'}),require.register("message-youtube.html",function(e,t,n){n.exports='<li class = "[[verified|verifiedClass]]" data-type = "[[header.mime]]">\n\t<section class = "author">\n\t\t<div class = "avatar"></div>\n\t\t<span class = "author">\n\t\t\t<a cv-link = "user/[[uid]]">[[header.author]]</a>\n\t\t\t<div class = "verify icon"></div>\n\t\t</span>\n\t</section>\n\n\t<section>\n\t\t<small title = "[[issued]]">[[issued|formatTime]]</small>\n\t</section>\n\n\t<section>\n\t\t<span class = "body">\n\t\t\t<iframe src="https://www.youtube.com/embed/[[videoCode]]?start=[[videoStart]]" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>\n\t\t</span>\n\t</section>\n\n\t<section class = "reaction-bar">\n\t\t<a cv-link>Reply</a>\n\t\t - <a cv-link>Like</a>\n\t\t - <a cv-link>Pay</a>\n\t\t - <a cv-link>Follow</a>\n\t</section>\n\n\t<section>\n\t\t<a cv-link = "/messages/[[name]]">\n\t\t\t[[name]]\n\t\t\t<img class = "icon" src = "/go.svg" />\n\t\t</a>\n\t</section>\n</li>\n'}),require.register("message.html",function(e,t,n){n.exports='<li class = "[[verified|verifiedClass]]" data-type = "[[header.mime]]">\n\t<section class = "author">\n\t\t<div class = "avatar"></div>\n\t\t<span class = "author">\n\t\t\t<a cv-link = "user/[[uid]]">[[header.author]]</a>\n\t\t\t<div class = "verify icon"></div>\n\t\t</span>\n\t</section>\n\n\t<section>\n\t\t<small title = "[[issued]]">[[issued|formatTime]]</small>\n\t</section>\n\n\t<section>\n\t\t<span class = "body text short">[[body]]</span>\n\t</section>\n\n\t<section class = "reaction-bar">\n\t\t<a cv-link>Reply</a>\n\t\t - <a cv-link>Like</a>\n\t\t - <a cv-link>Pay</a>\n\t\t - <a cv-link>Follow</a>\n\t</section>\n\n\t<section>\n\t\t<a cv-link = "/messages/[[name]]">\n\t\t\t[[name]]\n\t\t\t<img class = "icon" src = "/go.svg" />\n\t\t</a>\n\t</section>\n</li>\n'}),require.register("root.html",function(e,t,n){n.exports='<section class = "app theme-[[profileTheme]]">\n\n\t<section class = "header">\n\t\n\t\t<div class = "branding">\n\t\t\t<h1><a cv-link = "/">[[profileName]]</a></h1>\n\t\t\t<small>Fly you fools.</small>\n\t\t</div>\n\n\t\t<div class = "nav">\n\t\t\t<a cv-link = "/">home</a>\n\t\t\t<a cv-link = "/warehouse">stream</a>\n\t\t</div>\n\n\n\t\t<div class = "menu">\n\t\t\t<a cv-on = "click:githubLoginClicked(event)">\n\t\t\t\t<img class = "icon" src = "/user.svg">\n\t\t\t</a>\n\t\t\t\x3c!-- <a cv-on = "click:openSettings(event)">\n\t\t\t\t<img class = "icon" src = "/gear.svg">\n\t\t\t</a> --\x3e\n\t\t</div>\n\t</section>\n\n\t<section class = "body">\n\t\t\n\t\t[[content]]\n\n\t\t[[settings]]\n\t\n\t</section>\n\n\t<section class = "footer">\n\t\t&copy; 2021 Sean Morris, All rights reserved.\n\t</section>\n\n</section>\n'}),require.register("user-list.html",function(e,t,n){n.exports='<section class = "settings [[removeMode]]">\n\t<h2>Syndicating</h2>\n\t<ul class = "user-list" cv-each = "profiles:profile:p">\n\t\t<li>\n\t\t\t<section class = "author">\n\t\t\t\t<div class = "avatar" style = "background-image: url([[profile.img]])"></div>\n\t\t\t\t<span class = "author">\n\t\t\t\t\t<a cv-link = "/user/[[profile.uid]]">[[profile.name]]</a>\n\t\t\t\t</span>\n\t\t\t\t<img cv-on = "click:deleteUser(event, profile, p)" class = "icon delete-button" src = "/x.svg" />\n\t\t\t</section>\n\t\t</li>\n\t</ul>\n\t<div class = "button-row">\n\t\t<button class = "add">+</button>\n\t\t<button class = "remove" cv-on = "click:removeMode">-</button>\n\t</div>\n</section>'}),require.register("user.html",function(e,t,n){n.exports='<section class = "about-me">\n\n\t<section class = "author">\n\t\t<div class = "avatar" style = "background-image: url([[img]])"></div>\t\t\n\t\t<span class = "author">\n\t\t\t<a class = "user-name" cv-link = "/user/[[uid]]">[[name]]</a>\n\t\t\t<a class = "user-link" href = "[[url]]" target = "_blank">[[url]]</a>\n\t\t</span>\n\t</section>\n\n\t<p>about:</p>\n\t<section class = "block-text">[[about]]</span>\n\t</section>\n\n\t<p>contact card issued on:</p>\n\t<section class = "block-text">[[issued]]</span>\n\t</section>\n\n\t<p>hub server:</p>\n\t<section class = "block-text">[[hub]]</span>\n\t</section>\n\n\t<p>uid:</p>\n\t<section class = "block-text">[[uid]]</span>\n\t</section>\n\n\t<p>public key:</p>\n\t<section class = "block-text">[[key]]</span>\n\t</section>\n\n</section>\n'}),require.register("warehouse-console.html",function(e,t,n){n.exports="[[feed]]\n"}),require.register("___globals___",function(e,t,n){})}(),require("___globals___");
